#{to_json =>
   {with_defs,
    {#{<<"PatchChangeKind">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[<<"add">>]}}}},
          {struct,#{type => {required,{enum,[<<"delete">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"update">>]}},
             move_path => {optional,{any_of,[binstr,{exact,null}]}}}}]},
       <<"McpToolCallProgressNotification">> =>
        {struct,
         #{message => {required,binstr},
           threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr}}},
       <<"McpStartupStatus">> =>
        {any_of,
         [{struct,#{state => {required,{enum,[<<"starting">>]}}}},
          {struct,#{state => {required,{enum,[<<"ready">>]}}}},
          {struct,
           #{error => {required,binstr},
             state => {required,{enum,[<<"failed">>]}}}},
          {struct,#{state => {required,{enum,[<<"cancelled">>]}}}}]},
       <<"Duration">> =>
        {struct,#{nanos => {required,integer},secs => {required,integer}}},
       <<"AskForApproval">> =>
        {any_of,
         [{enum,[<<"untrusted">>]},
          {enum,[<<"on-failure">>]},
          {enum,[<<"on-request">>]},
          {enum,[<<"never">>]}]},
       <<"McpInvocation">> =>
        {struct,
         #{arguments => {optional,term},
           server => {required,binstr},
           tool => {required,binstr}}},
       <<"TurnCompletedNotification">> =>
        {struct,
         #{threadId => {required,binstr},turn => {required,{ref,<<"Turn">>}}}},
       <<"ReasoningEffort">> =>
        {enum,
         [<<"none">>,<<"minimal">>,<<"low">>,<<"medium">>,<<"high">>,
          <<"xhigh">>]},
       <<"ResponseItem">> =>
        {any_of,
         [{struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"message">>]}},
             content => {required,{list,{ref,<<"ContentItem">>}}},
             end_turn => {optional,{any_of,[boolean,{exact,null}]}},
             phase =>
              {optional,{any_of,[{ref,<<"MessagePhase">>},{exact,null}]}},
             role => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"reasoning">>]}},
             content =>
              {optional,
               {default,
                {null,
                 {any_of,
                  [{list,{ref,<<"ReasoningItemContent">>}},{exact,null}]}}}},
             summary =>
              {required,{list,{ref,<<"ReasoningItemReasoningSummary">>}}},
             encrypted_content => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {required,{ref,<<"LocalShellStatus">>}},
             type => {required,{enum,[<<"local_shell_call">>]}},
             action => {required,{ref,<<"LocalShellAction">>}},
             call_id => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             name => {required,binstr},
             type => {required,{enum,[<<"function_call">>]}},
             arguments => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,{ref,<<"FunctionCallOutputPayload">>}},
             type => {required,{enum,[<<"function_call_output">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             input => {required,binstr},
             name => {required,binstr},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"custom_tool_call">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,binstr},
             type => {required,{enum,[<<"custom_tool_call_output">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"web_search_call">>]}},
             action =>
              {optional,
               {any_of,[{ref,<<"WebSearchAction2">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"ghost_snapshot">>]}},
             ghost_commit => {required,{ref,<<"GhostCommit">>}}}},
          {struct,
           #{type => {required,{enum,[<<"compaction">>]}},
             encrypted_content => {required,binstr}}},
          {struct,#{type => {required,{enum,[<<"other">>]}}}}]},
       <<"TextPosition">> =>
        {struct,#{line => {required,integer},column => {required,integer}}},
       <<"MessagePhase">> => {enum,[<<"commentary">>,<<"final_answer">>]},
       <<"ReasoningSummaryTextDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr},
           summaryIndex => {required,integer}}},
       <<"RemoteSkillSummary">> =>
        {struct,
         #{id => {required,binstr},
           name => {required,binstr},
           description => {required,binstr}}},
       <<"ParsedCommand">> =>
        {any_of,
         [{struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"read">>]}},
             path => {required,binstr},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"list_files">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"search">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr},
             query => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"unknown">>]}},
             cmd => {required,binstr}}}]},
       <<"FunctionCallOutputPayload">> =>
        {struct,
         #{success => {optional,{any_of,[boolean,{exact,null}]}},
           body => {required,{ref,<<"FunctionCallOutputBody">>}}}},
       <<"SandboxPolicy">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[<<"danger-full-access">>]}}}},
          {struct,#{type => {required,{enum,[<<"read-only">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"external-sandbox">>]}},
             network_access =>
              {optional,
               {default,
                {<<"restricted">>,{all_of,[{ref,<<"NetworkAccess">>}]}}}}}},
          {struct,
           #{type => {required,{enum,[<<"workspace-write">>]}},
             network_access => {optional,{default,{false,boolean}}},
             exclude_slash_tmp => {optional,{default,{false,boolean}}},
             exclude_tmpdir_env_var => {optional,{default,{false,boolean}}},
             writable_roots =>
              {optional,{list,{ref,<<"AbsolutePathBuf">>}}}}}]},
       <<"TextElement">> =>
        {struct,
         #{byteRange => {required,{all_of,[{ref,<<"ByteRange">>}]}},
           placeholder => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"McpToolCallError">> => {struct,#{message => {required,binstr}}},
       <<"TurnPlanStep">> =>
        {struct,
         #{status => {required,{ref,<<"TurnPlanStepStatus">>}},
           step => {required,binstr}}},
       <<"McpServerOauthLoginCompletedNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           name => {required,binstr},
           success => {required,boolean}}},
       <<"TextElement2">> =>
        {struct,
         #{placeholder => {optional,{any_of,[binstr,{exact,null}]}},
           byte_range => {required,{all_of,[{ref,<<"ByteRange2">>}]}}}},
       <<"TextRange">> =>
        {struct,
         #{start => {required,{ref,<<"TextPosition">>}},
           'end' => {required,{ref,<<"TextPosition">>}}}},
       <<"AccountLoginCompletedNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           success => {required,boolean},
           loginId => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"CollabAgentToolCallStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>]},
       <<"TurnPlanStepStatus">> =>
        {enum,[<<"pending">>,<<"inProgress">>,<<"completed">>]},
       <<"SubAgentSource">> =>
        {any_of,
         [{enum,[<<"review">>,<<"compact">>]},
          {struct,
           #{thread_spawn =>
              {required,
               {struct,
                #{depth => {required,integer},
                  parent_thread_id => {required,{ref,<<"ThreadId">>}}}}}}},
          {struct,#{other => {required,binstr}}}]},
       <<"ExecOutputStream">> => {enum,[<<"stdout">>,<<"stderr">>]},
       <<"ThreadTokenUsageUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           tokenUsage => {required,{ref,<<"ThreadTokenUsage">>}}}},
       <<"AgentMessageContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"Text">>]}},
             text => {required,binstr}}}]},
       <<"SessionConfiguredNotification">> =>
        {struct,
         #{rolloutPath => {required,binstr},
           model => {required,binstr},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           historyEntryCount => {required,integer},
           historyLogId => {required,integer},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
           sessionId => {required,{ref,<<"ThreadId">>}}}},
       <<"TurnStartedNotification">> =>
        {struct,
         #{threadId => {required,binstr},turn => {required,{ref,<<"Turn">>}}}},
       <<"UserInput">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"text">>]}},
             text => {required,binstr},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement">>}}}}}}},
          {struct,
           #{type => {required,{enum,[<<"image">>]}},
             url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"localImage">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"skill">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"mention">>]}},
             path => {required,binstr}}}]},
       <<"RequestUserInputQuestionOption">> =>
        {struct,
         #{label => {required,binstr},description => {required,binstr}}},
       <<"CommandExecutionStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>,<<"declined">>]},
       <<"AbsolutePathBuf">> => binstr,
       <<"FunctionCallOutputContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"input_text">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"input_image">>]}},
             image_url => {required,binstr}}}]},
       <<"ReasoningSummaryPartAddedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr},
           summaryIndex => {required,integer}}},
       <<"CommandAction">> =>
        {any_of,
         [{struct,
           #{command => {required,binstr},
             name => {required,binstr},
             type => {required,{enum,[<<"read">>]}},
             path => {required,binstr}}},
          {struct,
           #{command => {required,binstr},
             type => {required,{enum,[<<"listFiles">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{command => {required,binstr},
             type => {required,{enum,[<<"search">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             query => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{command => {required,binstr},
             type => {required,{enum,[<<"unknown">>]}}}}]},
       <<"PlanType">> =>
        {enum,
         [<<"free">>,<<"go">>,<<"plus">>,<<"pro">>,<<"team">>,<<"business">>,
          <<"enterprise">>,<<"edu">>,<<"unknown">>]},
       <<"SkillDependencies">> =>
        {struct,#{tools => {required,{list,{ref,<<"SkillToolDependency">>}}}}},
       <<"SkillInterface">> =>
        {struct,
         #{short_description => {optional,{any_of,[binstr,{exact,null}]}},
           brand_color => {optional,{any_of,[binstr,{exact,null}]}},
           default_prompt => {optional,{any_of,[binstr,{exact,null}]}},
           display_name => {optional,{any_of,[binstr,{exact,null}]}},
           icon_large => {optional,{any_of,[binstr,{exact,null}]}},
           icon_small => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"Resource">> =>
        {struct,
         #{name => {required,binstr},
           size => {optional,{any_of,[integer,{exact,null}]}},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           uri => {required,binstr},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ThreadId">> => binstr,
       <<"SkillsListEntry">> =>
        {struct,
         #{cwd => {required,binstr},
           errors => {required,{list,{ref,<<"SkillErrorInfo">>}}},
           skills => {required,{list,{ref,<<"SkillMetadata">>}}}}},
       <<"ConfigWarningNotification">> =>
        {struct,
         #{path => {optional,{any_of,[binstr,{exact,null}]}},
           range => {optional,{any_of,[{ref,<<"TextRange">>},{exact,null}]}},
           details => {optional,{any_of,[binstr,{exact,null}]}},
           summary => {required,binstr}}},
       <<"RateLimitSnapshot">> =>
        {struct,
         #{primary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}},
           planType => {optional,{any_of,[{ref,<<"PlanType">>},{exact,null}]}},
           credits =>
            {optional,{any_of,[{ref,<<"CreditsSnapshot">>},{exact,null}]}},
           secondary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}}}},
       <<"ReviewTarget">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[<<"uncommittedChanges">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"baseBranch">>]}},
             branch => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"commit">>]}},
             title => {optional,{any_of,[binstr,{exact,null}]}},
             sha => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"custom">>]}},
             instructions => {required,binstr}}}]},
       <<"TerminalInteractionNotification">> =>
        {struct,
         #{stdin => {required,binstr},
           threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr},
           processId => {required,binstr}}},
       <<"CollabAgentStatus">> =>
        {enum,
         [<<"pendingInit">>,<<"running">>,<<"completed">>,<<"errored">>,
          <<"shutdown">>,<<"notFound">>]},
       <<"FunctionCallOutputBody">> =>
        {any_of,[binstr,{list,{ref,<<"FunctionCallOutputContentItem">>}}]},
       <<"ThreadStartedNotification">> =>
        {struct,#{thread => {required,{ref,<<"Thread">>}}}},
       <<"CollabAgentTool">> =>
        {enum,[<<"spawnAgent">>,<<"sendInput">>,<<"wait">>,<<"closeAgent">>]},
       <<"ItemStartedNotification">> =>
        {struct,
         #{item => {required,{ref,<<"ThreadItem">>}},
           threadId => {required,binstr},
           turnId => {required,binstr}}},
       <<"RateLimitWindow">> =>
        {struct,
         #{resetsAt => {optional,{any_of,[integer,{exact,null}]}},
           usedPercent => {required,integer},
           windowDurationMins => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"McpAuthStatus">> =>
        {enum,
         [<<"unsupported">>,<<"not_logged_in">>,<<"bearer_token">>,
          <<"o_auth">>]},
       <<"SkillMetadata">> =>
        {struct,
         #{enabled => {required,boolean},
           name => {required,binstr},
           scope => {required,{ref,<<"SkillScope">>}},
           path => {required,binstr},
           interface =>
            {optional,{any_of,[{ref,<<"SkillInterface">>},{exact,null}]}},
           description => {required,binstr},
           dependencies =>
            {optional,{any_of,[{ref,<<"SkillDependencies">>},{exact,null}]}},
           short_description => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"WindowsWorldWritableWarningNotification">> =>
        {struct,
         #{extraCount => {required,integer},
           failedScan => {required,boolean},
           samplePaths => {required,{list,binstr}}}},
       <<"CallToolResult">> =>
        {struct,
         #{content => {required,{list,term}},
           structuredContent => {optional,term},
           '_meta' => {optional,term},
           isError => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"LocalShellStatus">> =>
        {enum,[<<"completed">>,<<"in_progress">>,<<"incomplete">>]},
       <<"RateLimitSnapshot2">> =>
        {struct,
         #{primary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow2">>},{exact,null}]}},
           credits =>
            {optional,{any_of,[{ref,<<"CreditsSnapshot2">>},{exact,null}]}},
           secondary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow2">>},{exact,null}]}},
           plan_type =>
            {optional,{any_of,[{ref,<<"PlanType">>},{exact,null}]}}}},
       <<"TurnError">> =>
        {struct,
         #{message => {required,binstr},
           additionalDetails =>
            {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}},
           codexErrorInfo =>
            {optional,{any_of,[{ref,<<"CodexErrorInfo">>},{exact,null}]}}}},
       <<"GhostCommit">> =>
        {struct,
         #{id => {required,binstr},
           parent => {optional,{any_of,[binstr,{exact,null}]}},
           preexisting_untracked_dirs => {required,{list,binstr}},
           preexisting_untracked_files => {required,{list,binstr}}}},
       <<"ErrorNotification">> =>
        {struct,
         #{error => {required,{ref,<<"TurnError">>}},
           threadId => {required,binstr},
           turnId => {required,binstr},
           willRetry => {required,boolean}}},
       <<"PatchApplyStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>,<<"declined">>]},
       <<"ModeKind">> => {enum,[<<"plan">>,<<"default">>]},
       <<"AuthMode">> =>
        {any_of,
         [{enum,[<<"apikey">>]},
          {enum,[<<"chatgpt">>]},
          {enum,[<<"chatgptAuthTokens">>]}]},
       <<"ReasoningItemReasoningSummary">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"summary_text">>]}},
             text => {required,binstr}}}]},
       <<"McpToolCallStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>]},
       <<"Turn">> =>
        {struct,
         #{error => {optional,{any_of,[{ref,<<"TurnError">>},{exact,null}]}},
           id => {required,binstr},
           status => {required,{ref,<<"TurnStatus">>}},
           items => {required,{list,{ref,<<"ThreadItem">>}}}}},
       <<"ThreadNameUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           threadName => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ReasoningItemContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"reasoning_text">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"text">>]}},
             text => {required,binstr}}}]},
       <<"LoginChatGptCompleteNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           success => {required,boolean},
           loginId => {required,binstr}}},
       <<"CommandExecutionOutputDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"AgentMessageDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"UserInput2">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"text">>]}},
             text => {required,binstr},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement2">>}}}}}}},
          {struct,
           #{type => {required,{enum,[<<"image">>]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"local_image">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"skill">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"mention">>]}},
             path => {required,binstr}}}]},
       <<"Result_of_CallToolResult_or_String">> =>
        {any_of,
         [{struct,#{'Ok' => {required,{ref,<<"CallToolResult">>}}}},
          {struct,#{'Err' => {required,binstr}}}]},
       <<"Tool">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           outputSchema => {optional,term},
           inputSchema => {required,term},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}}}},
       <<"ResourceTemplate">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           annotations => {optional,term},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}},
           uriTemplate => {required,binstr}}},
       <<"AuthStatusChangeNotification">> =>
        {struct,
         #{authMethod =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}}}},
       <<"CreditsSnapshot2">> =>
        {struct,
         #{unlimited => {required,boolean},
           balance => {optional,{any_of,[binstr,{exact,null}]}},
           has_credits => {required,boolean}}},
       <<"TurnItem">> =>
        {any_of,
         [{struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"UserMessage">>]}},
             content => {required,{list,{ref,<<"UserInput2">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"AgentMessage">>]}},
             content => {required,{list,{ref,<<"AgentMessageContent">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"Plan">>]}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"Reasoning">>]}},
             raw_content => {optional,{default,{[],{list,binstr}}}},
             summary_text => {required,{list,binstr}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"WebSearch">>]}},
             query => {required,binstr},
             action => {required,{ref,<<"WebSearchAction2">>}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"ContextCompaction">>]}}}}]},
       <<"PlanItemArg">> =>
        {struct,
         #{status => {required,{ref,<<"StepStatus">>}},
           step => {required,binstr}}},
       <<"HistoryEntry">> =>
        {struct,
         #{text => {required,binstr},
           conversation_id => {required,binstr},
           ts => {required,integer}}},
       <<"ExecCommandSource">> =>
        {enum,
         [<<"agent">>,<<"user_shell">>,<<"unified_exec_startup">>,
          <<"unified_exec_interaction">>]},
       <<"RequestUserInputQuestion">> =>
        {struct,
         #{id => {required,binstr},
           header => {required,binstr},
           options =>
            {optional,
             {any_of,
              [{list,{ref,<<"RequestUserInputQuestionOption">>}},
               {exact,null}]}},
           isOther => {optional,{default,{false,boolean}}},
           isSecret => {optional,{default,{false,boolean}}},
           question => {required,binstr}}},
       <<"ThreadTokenUsage">> =>
        {struct,
         #{total => {required,{ref,<<"TokenUsageBreakdown">>}},
           last => {required,{ref,<<"TokenUsageBreakdown">>}},
           modelContextWindow => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"TurnAbortReason">> =>
        {enum,[<<"interrupted">>,<<"replaced">>,<<"review_ended">>]},
       <<"TokenUsageBreakdown">> =>
        {struct,
         #{cachedInputTokens => {required,integer},
           inputTokens => {required,integer},
           outputTokens => {required,integer},
           reasoningOutputTokens => {required,integer},
           totalTokens => {required,integer}}},
       <<"TurnStatus">> =>
        {enum,
         [<<"completed">>,<<"interrupted">>,<<"failed">>,<<"inProgress">>]},
       <<"WebSearchAction">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"search">>]}},
             query => {optional,{any_of,[binstr,{exact,null}]}},
             queries => {optional,{any_of,[{list,binstr},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"openPage">>]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"findInPage">>]}},
             pattern => {optional,{any_of,[binstr,{exact,null}]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{type => {required,{enum,[<<"other">>]}}}}]},
       <<"CreditsSnapshot">> =>
        {struct,
         #{unlimited => {required,boolean},
           balance => {optional,{any_of,[binstr,{exact,null}]}},
           hasCredits => {required,boolean}}},
       <<"StepStatus">> =>
        {enum,[<<"pending">>,<<"in_progress">>,<<"completed">>]},
       <<"CollabAgentState">> =>
        {struct,
         #{message => {optional,{any_of,[binstr,{exact,null}]}},
           status => {required,{ref,<<"CollabAgentStatus">>}}}},
       <<"FileUpdateChange">> =>
        {struct,
         #{path => {required,binstr},
           diff => {required,binstr},
           kind => {required,{ref,<<"PatchChangeKind">>}}}},
       <<"SkillErrorInfo">> =>
        {struct,#{message => {required,binstr},path => {required,binstr}}},
       <<"TokenUsageInfo">> =>
        {struct,
         #{model_context_window => {optional,{any_of,[integer,{exact,null}]}},
           last_token_usage => {required,{ref,<<"TokenUsage">>}},
           total_token_usage => {required,{ref,<<"TokenUsage">>}}}},
       <<"FileChange">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"add">>]}},
             content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"delete">>]}},
             content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"update">>]}},
             move_path => {optional,{any_of,[binstr,{exact,null}]}},
             unified_diff => {required,binstr}}}]},
       <<"CustomPrompt">> =>
        {struct,
         #{name => {required,binstr},
           path => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           content => {required,binstr},
           argument_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ByteRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"CodexErrorInfo">> =>
        {any_of,
         [{enum,
           [<<"contextWindowExceeded">>,<<"usageLimitExceeded">>,
            <<"internalServerError">>,<<"unauthorized">>,<<"badRequest">>,
            <<"threadRollbackFailed">>,<<"sandboxError">>,<<"other">>]},
          {struct,
           #{modelCap =>
              {required,
               {struct,
                #{model => {required,binstr},
                  reset_after_seconds =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{httpConnectionFailed =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{responseStreamConnectionFailed =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{responseStreamDisconnected =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{responseTooManyFailedAttempts =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}}]},
       <<"WebSearchAction2">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"search">>]}},
             query => {optional,{any_of,[binstr,{exact,null}]}},
             queries => {optional,{any_of,[{list,binstr},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"open_page">>]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"find_in_page">>]}},
             pattern => {optional,{any_of,[binstr,{exact,null}]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{type => {required,{enum,[<<"other">>]}}}}]},
       <<"AccountRateLimitsUpdatedNotification">> =>
        {struct,#{rateLimits => {required,{ref,<<"RateLimitSnapshot">>}}}},
       <<"NetworkAccess">> => {enum,[<<"restricted">>,<<"enabled">>]},
       <<"SkillScope">> =>
        {enum,[<<"user">>,<<"repo">>,<<"system">>,<<"admin">>]},
       <<"TurnPlanUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           explanation => {optional,{any_of,[binstr,{exact,null}]}},
           plan => {required,{list,{ref,<<"TurnPlanStep">>}}}}},
       <<"DeprecationNoticeNotification">> =>
        {struct,
         #{details => {optional,{any_of,[binstr,{exact,null}]}},
           summary => {required,binstr}}},
       <<"RateLimitWindow2">> =>
        {struct,
         #{resets_at => {optional,{any_of,[integer,{exact,null}]}},
           used_percent => {required,number},
           window_minutes => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"ContextCompactedNotification">> =>
        {struct,#{threadId => {required,binstr},turnId => {required,binstr}}},
       <<"ContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"input_text">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"input_image">>]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"output_text">>]}},
             text => {required,binstr}}}]},
       <<"RequestId">> => {any_of,[binstr,integer]},
       <<"ThreadItem">> =>
        {any_of,
         [{struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"userMessage">>]}},
             content => {required,{list,{ref,<<"UserInput">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"agentMessage">>]}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"plan">>]}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"reasoning">>]}},
             content => {optional,{default,{[],{list,binstr}}}},
             summary => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{command => {required,binstr},
             id => {required,binstr},
             status => {required,{ref,<<"CommandExecutionStatus">>}},
             type => {required,{enum,[<<"commandExecution">>]}},
             cwd => {required,binstr},
             exitCode => {optional,{any_of,[integer,{exact,null}]}},
             processId => {optional,{any_of,[binstr,{exact,null}]}},
             aggregatedOutput => {optional,{any_of,[binstr,{exact,null}]}},
             commandActions => {required,{list,{ref,<<"CommandAction">>}}},
             durationMs => {optional,{any_of,[integer,{exact,null}]}}}},
          {struct,
           #{id => {required,binstr},
             status => {required,{ref,<<"PatchApplyStatus">>}},
             type => {required,{enum,[<<"fileChange">>]}},
             changes => {required,{list,{ref,<<"FileUpdateChange">>}}}}},
          {struct,
           #{error =>
              {optional,{any_of,[{ref,<<"McpToolCallError">>},{exact,null}]}},
             id => {required,binstr},
             status => {required,{ref,<<"McpToolCallStatus">>}},
             type => {required,{enum,[<<"mcpToolCall">>]}},
             arguments => {required,term},
             result =>
              {optional,{any_of,[{ref,<<"McpToolCallResult">>},{exact,null}]}},
             server => {required,binstr},
             tool => {required,binstr},
             durationMs => {optional,{any_of,[integer,{exact,null}]}}}},
          {struct,
           #{id => {required,binstr},
             status =>
              {required,{all_of,[{ref,<<"CollabAgentToolCallStatus">>}]}},
             type => {required,{enum,[<<"collabAgentToolCall">>]}},
             prompt => {optional,{any_of,[binstr,{exact,null}]}},
             tool => {required,{all_of,[{ref,<<"CollabAgentTool">>}]}},
             agentsStates =>
              {required,{map,{binstr,{ref,<<"CollabAgentState">>}}}},
             receiverThreadIds => {required,{list,binstr}},
             senderThreadId => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"webSearch">>]}},
             query => {required,binstr},
             action =>
              {optional,{any_of,[{ref,<<"WebSearchAction">>},{exact,null}]}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"imageView">>]}},
             path => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"enteredReviewMode">>]}},
             review => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"exitedReviewMode">>]}},
             review => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"contextCompaction">>]}}}}]},
       <<"PlanDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"RawResponseItemCompletedNotification">> =>
        {struct,
         #{item => {required,{ref,<<"ResponseItem">>}},
           threadId => {required,binstr},
           turnId => {required,binstr}}},
       <<"SkillToolDependency">> =>
        {struct,
         #{command => {optional,{any_of,[binstr,{exact,null}]}},
           type => {required,binstr},
           value => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           url => {optional,{any_of,[binstr,{exact,null}]}},
           transport => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"McpToolCallResult">> =>
        {struct,
         #{content => {required,{list,term}},
           structuredContent => {optional,term}}},
       <<"SessionSource">> =>
        {any_of,
         [{enum,
           [<<"cli">>,<<"vscode">>,<<"exec">>,<<"appServer">>,<<"unknown">>]},
          {struct,#{subAgent => {required,{ref,<<"SubAgentSource">>}}}}]},
       <<"EventMsg">> =>
        {any_of,
         [{struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"error">>]}},
             codex_error_info =>
              {optional,
               {default,
                {null,{any_of,[{ref,<<"CodexErrorInfo2">>},{exact,null}]}}}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"warning">>]}}}},
          {struct,#{type => {required,{enum,[<<"context_compacted">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"thread_rolled_back">>]}},
             num_turns => {required,integer}}},
          {struct,
           #{type => {required,{enum,[<<"task_started">>]}},
             model_context_window =>
              {optional,{any_of,[integer,{exact,null}]}},
             collaboration_mode_kind =>
              {optional,
               {default,{<<"default">>,{all_of,[{ref,<<"ModeKind">>}]}}}}}},
          {struct,
           #{type => {required,{enum,[<<"task_complete">>]}},
             last_agent_message => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{info =>
              {optional,{any_of,[{ref,<<"TokenUsageInfo">>},{exact,null}]}},
             type => {required,{enum,[<<"token_count">>]}},
             rate_limits =>
              {optional,
               {any_of,[{ref,<<"RateLimitSnapshot2">>},{exact,null}]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"agent_message">>]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"user_message">>]}},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement2">>}}}}},
             images => {optional,{any_of,[{list,binstr},{exact,null}]}},
             local_images => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{type => {required,{enum,[<<"agent_message_delta">>]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning_delta">>]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning_raw_content">>]}},
             text => {required,binstr}}},
          {struct,
           #{type =>
              {required,{enum,[<<"agent_reasoning_raw_content_delta">>]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning_section_break">>]}},
             item_id => {optional,{default,{<<>>,binstr}}},
             summary_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[<<"session_configured">>]}},
             cwd => {required,binstr},
             model => {required,binstr},
             reasoning_effort =>
              {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
             approval_policy =>
              {required,{all_of,[{ref,<<"AskForApproval">>}]}},
             forked_from_id =>
              {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}},
             history_entry_count => {required,integer},
             history_log_id => {required,integer},
             initial_messages =>
              {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
             model_provider_id => {required,binstr},
             rollout_path => {optional,{any_of,[binstr,{exact,null}]}},
             sandbox_policy => {required,{all_of,[{ref,<<"SandboxPolicy">>}]}},
             session_id => {required,{ref,<<"ThreadId">>}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"thread_name_updated">>]}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}},
             thread_id => {required,{ref,<<"ThreadId">>}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"McpStartupStatus">>}]}},
             type => {required,{enum,[<<"mcp_startup_update">>]}},
             server => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_startup_complete">>]}},
             cancelled => {required,{list,binstr}},
             failed => {required,{list,{ref,<<"McpStartupFailure">>}}},
             ready => {required,{list,binstr}}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_tool_call_begin">>]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_tool_call_end">>]}},
             result =>
              {required,
               {all_of,[{ref,<<"Result_of_CallToolResult_or_String">>}]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}},
             duration => {required,{ref,<<"Duration">>}}}},
          {struct,
           #{type => {required,{enum,[<<"web_search_begin">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"web_search_end">>]}},
             query => {required,binstr},
             action => {required,{ref,<<"WebSearchAction2">>}},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[<<"exec_command_begin">>]}},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr}}},
          {struct,
           #{stream => {required,{all_of,[{ref,<<"ExecOutputStream">>}]}},
             type => {required,{enum,[<<"exec_command_output_delta">>]}},
             chunk => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"terminal_interaction">>]}},
             stdin => {required,binstr},
             call_id => {required,binstr},
             process_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[<<"exec_command_end">>]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             duration => {required,{all_of,[{ref,<<"Duration">>}]}},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr},
             aggregated_output => {optional,{default,{<<>>,binstr}}},
             exit_code => {required,integer},
             formatted_output => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"view_image_tool_call">>]}},
             path => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"exec_approval_request">>]}},
             cwd => {required,binstr},
             proposed_execpolicy_amendment =>
              {optional,{any_of,[{list,binstr},{exact,null}]}},
             call_id => {required,binstr},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[<<"request_user_input">>]}},
             questions =>
              {required,{list,{ref,<<"RequestUserInputQuestion">>}}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[<<"dynamic_tool_call_request">>]}},
             arguments => {required,term},
             callId => {required,binstr},
             tool => {required,binstr},
             turnId => {required,binstr}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             message => {required,binstr},
             type => {required,{enum,[<<"elicitation_request">>]}},
             server_name => {required,binstr}}},
          {struct,
           #{reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"apply_patch_approval_request">>]}},
             call_id => {required,binstr},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             turn_id => {optional,{default,{<<>>,binstr}}},
             grant_root => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"deprecation_notice">>]}},
             details => {optional,{any_of,[binstr,{exact,null}]}},
             summary => {required,binstr}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"background_event">>]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"undo_started">>]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"undo_completed">>]}},
             success => {required,boolean}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"stream_error">>]}},
             codex_error_info =>
              {optional,
               {default,
                {null,{any_of,[{ref,<<"CodexErrorInfo2">>},{exact,null}]}}}},
             additional_details =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}}}},
          {struct,
           #{type => {required,{enum,[<<"patch_apply_begin">>]}},
             call_id => {required,binstr},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             turn_id => {optional,{default,{<<>>,binstr}}},
             auto_approved => {required,boolean}}},
          {struct,
           #{type => {required,{enum,[<<"patch_apply_end">>]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             success => {required,boolean},
             call_id => {required,binstr},
             changes =>
              {optional,{default,{#{},{map,{binstr,{ref,<<"FileChange">>}}}}}},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[<<"turn_diff">>]}},
             unified_diff => {required,binstr}}},
          {struct,
           #{offset => {required,integer},
             type => {required,{enum,[<<"get_history_entry_response">>]}},
             entry =>
              {optional,{any_of,[{ref,<<"HistoryEntry">>},{exact,null}]}},
             log_id => {required,integer}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_list_tools_response">>]}},
             tools => {required,{map,{binstr,{ref,<<"Tool">>}}}},
             resources =>
              {required,{map,{binstr,{list,{ref,<<"Resource">>}}}}},
             auth_statuses =>
              {required,{map,{binstr,{ref,<<"McpAuthStatus">>}}}},
             resource_templates =>
              {required,{map,{binstr,{list,{ref,<<"ResourceTemplate">>}}}}}}},
          {struct,
           #{type => {required,{enum,[<<"list_custom_prompts_response">>]}},
             custom_prompts => {required,{list,{ref,<<"CustomPrompt">>}}}}},
          {struct,
           #{type => {required,{enum,[<<"list_skills_response">>]}},
             skills => {required,{list,{ref,<<"SkillsListEntry">>}}}}},
          {struct,
           #{type => {required,{enum,[<<"list_remote_skills_response">>]}},
             skills => {required,{list,{ref,<<"RemoteSkillSummary">>}}}}},
          {struct,
           #{id => {required,binstr},
             name => {required,binstr},
             type => {required,{enum,[<<"remote_skill_downloaded">>]}},
             path => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"skills_update_available">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"plan_update">>]}},
             explanation =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}},
             plan => {required,{list,{ref,<<"PlanItemArg">>}}}}},
          {struct,
           #{reason => {required,{ref,<<"TurnAbortReason">>}},
             type => {required,{enum,[<<"turn_aborted">>]}}}},
          {struct,#{type => {required,{enum,[<<"shutdown_complete">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"entered_review_mode">>]}},
             target => {required,{ref,<<"ReviewTarget">>}},
             user_facing_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"exited_review_mode">>]}},
             review_output =>
              {optional,
               {any_of,[{ref,<<"ReviewOutputEvent">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"raw_response_item">>]}},
             item => {required,{ref,<<"ResponseItem">>}}}},
          {struct,
           #{type => {required,{enum,[<<"item_started">>]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"item_completed">>]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_message_content_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"plan_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"reasoning_content_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             summary_index => {optional,{default,{0,integer}}},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"reasoning_raw_content_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr},
             content_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_agent_spawn_begin">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[<<"collab_agent_spawn_end">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             new_thread_id =>
              {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_agent_interaction_begin">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[<<"collab_agent_interaction_end">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_waiting_begin">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_ids => {required,{list,{ref,<<"ThreadId">>}}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_waiting_end">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             statuses => {required,{map,{binstr,{ref,<<"AgentStatus">>}}}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_close_begin">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[<<"collab_close_end">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}}]},
       <<"AgentStatus">> =>
        {any_of,
         [{enum,[<<"pending_init">>]},
          {enum,[<<"running">>]},
          {struct,#{completed => {required,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{errored => {required,binstr}}},
          {enum,[<<"shutdown">>]},
          {enum,[<<"not_found">>]}]},
       <<"ItemCompletedNotification">> =>
        {struct,
         #{item => {required,{ref,<<"ThreadItem">>}},
           threadId => {required,binstr},
           turnId => {required,binstr}}},
       <<"TurnDiffUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           diff => {required,binstr}}},
       <<"FileChangeOutputDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"GitInfo">> =>
        {struct,
         #{sha => {optional,{any_of,[binstr,{exact,null}]}},
           branch => {optional,{any_of,[binstr,{exact,null}]}},
           originUrl => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ReviewCodeLocation">> =>
        {struct,
         #{absolute_file_path => {required,binstr},
           line_range => {required,{ref,<<"ReviewLineRange">>}}}},
       <<"TokenUsage">> =>
        {struct,
         #{cached_input_tokens => {required,integer},
           input_tokens => {required,integer},
           output_tokens => {required,integer},
           reasoning_output_tokens => {required,integer},
           total_tokens => {required,integer}}},
       <<"ByteRange2">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"McpStartupFailure">> =>
        {struct,#{error => {required,binstr},server => {required,binstr}}},
       <<"ReviewOutputEvent">> =>
        {struct,
         #{findings => {required,{list,{ref,<<"ReviewFinding">>}}},
           overall_confidence_score => {required,number},
           overall_correctness => {required,binstr},
           overall_explanation => {required,binstr}}},
       <<"ReviewLineRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"ReviewFinding">> =>
        {struct,
         #{priority => {required,integer},
           title => {required,binstr},
           body => {required,binstr},
           code_location => {required,{ref,<<"ReviewCodeLocation">>}},
           confidence_score => {required,number}}},
       <<"ReasoningTextDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr},
           contentIndex => {required,integer}}},
       <<"AccountUpdatedNotification">> =>
        {struct,
         #{authMode =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}}}},
       <<"CodexErrorInfo2">> =>
        {any_of,
         [{enum,
           [<<"context_window_exceeded">>,<<"usage_limit_exceeded">>,
            <<"internal_server_error">>,<<"unauthorized">>,<<"bad_request">>,
            <<"sandbox_error">>,<<"thread_rollback_failed">>,<<"other">>]},
          {struct,
           #{model_cap =>
              {required,
               {struct,
                #{model => {required,binstr},
                  reset_after_seconds =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{http_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_disconnected =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_too_many_failed_attempts =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}}]},
       <<"LocalShellAction">> =>
        {any_of,
         [{struct,
           #{command => {required,{list,binstr}},
             env => {optional,{any_of,[{map,{binstr,term}},{exact,null}]}},
             type => {required,{enum,[<<"exec">>]}},
             user => {optional,{any_of,[binstr,{exact,null}]}},
             timeout_ms => {optional,{any_of,[integer,{exact,null}]}},
             working_directory =>
              {optional,{any_of,[binstr,{exact,null}]}}}}]},
       <<"Thread">> =>
        {struct,
         #{id => {required,binstr},
           path => {optional,{any_of,[binstr,{exact,null}]}},
           source => {required,{all_of,[{ref,<<"SessionSource">>}]}},
           cwd => {required,binstr},
           modelProvider => {required,binstr},
           cliVersion => {required,binstr},
           gitInfo => {optional,{any_of,[{ref,<<"GitInfo">>},{exact,null}]}},
           preview => {required,binstr},
           updatedAt => {required,integer},
           createdAt => {required,integer},
           turns => {required,{list,{ref,<<"Turn">>}}}}}},
     {any_of,
      [{struct,
        #{params => {required,{ref,<<"ErrorNotification">>}},
          method => {required,{enum,[<<"error">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ThreadStartedNotification">>}},
          method => {required,{enum,[<<"thread/started">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ThreadNameUpdatedNotification">>}},
          method => {required,{enum,[<<"thread/name/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ThreadTokenUsageUpdatedNotification">>}},
          method => {required,{enum,[<<"thread/tokenUsage/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnStartedNotification">>}},
          method => {required,{enum,[<<"turn/started">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnCompletedNotification">>}},
          method => {required,{enum,[<<"turn/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnDiffUpdatedNotification">>}},
          method => {required,{enum,[<<"turn/diff/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnPlanUpdatedNotification">>}},
          method => {required,{enum,[<<"turn/plan/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ItemStartedNotification">>}},
          method => {required,{enum,[<<"item/started">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ItemCompletedNotification">>}},
          method => {required,{enum,[<<"item/completed">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"RawResponseItemCompletedNotification">>}},
          method => {required,{enum,[<<"rawResponseItem/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AgentMessageDeltaNotification">>}},
          method => {required,{enum,[<<"item/agentMessage/delta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"PlanDeltaNotification">>}},
          method => {required,{enum,[<<"item/plan/delta">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"CommandExecutionOutputDeltaNotification">>}},
          method =>
           {required,{enum,[<<"item/commandExecution/outputDelta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TerminalInteractionNotification">>}},
          method =>
           {required,
            {enum,[<<"item/commandExecution/terminalInteraction">>]}}}},
       {struct,
        #{params => {required,{ref,<<"FileChangeOutputDeltaNotification">>}},
          method => {required,{enum,[<<"item/fileChange/outputDelta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"McpToolCallProgressNotification">>}},
          method => {required,{enum,[<<"item/mcpToolCall/progress">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"McpServerOauthLoginCompletedNotification">>}},
          method => {required,{enum,[<<"mcpServer/oauthLogin/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AccountUpdatedNotification">>}},
          method => {required,{enum,[<<"account/updated">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"AccountRateLimitsUpdatedNotification">>}},
          method => {required,{enum,[<<"account/rateLimits/updated">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"ReasoningSummaryTextDeltaNotification">>}},
          method =>
           {required,{enum,[<<"item/reasoning/summaryTextDelta">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"ReasoningSummaryPartAddedNotification">>}},
          method =>
           {required,{enum,[<<"item/reasoning/summaryPartAdded">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ReasoningTextDeltaNotification">>}},
          method => {required,{enum,[<<"item/reasoning/textDelta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ContextCompactedNotification">>}},
          method => {required,{enum,[<<"thread/compacted">>]}}}},
       {struct,
        #{params => {required,{ref,<<"DeprecationNoticeNotification">>}},
          method => {required,{enum,[<<"deprecationNotice">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ConfigWarningNotification">>}},
          method => {required,{enum,[<<"configWarning">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"WindowsWorldWritableWarningNotification">>}},
          method => {required,{enum,[<<"windows/worldWritableWarning">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AccountLoginCompletedNotification">>}},
          method => {required,{enum,[<<"account/login/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AuthStatusChangeNotification">>}},
          method => {required,{enum,[<<"authStatusChange">>]}}}},
       {struct,
        #{params => {required,{ref,<<"LoginChatGptCompleteNotification">>}},
          method => {required,{enum,[<<"loginChatGptComplete">>]}}}},
       {struct,
        #{params => {required,{ref,<<"SessionConfiguredNotification">>}},
          method => {required,{enum,[<<"sessionConfigured">>]}}}}]}}},
  from_json =>
   {with_defs,
    {#{<<"PatchChangeKind">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[<<"add">>]}}}},
          {struct,#{type => {required,{enum,[<<"delete">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"update">>]}},
             move_path => {optional,{any_of,[binstr,{exact,null}]}}}}]},
       <<"McpToolCallProgressNotification">> =>
        {struct,
         #{message => {required,binstr},
           threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr}}},
       <<"McpStartupStatus">> =>
        {any_of,
         [{struct,#{state => {required,{enum,[<<"starting">>]}}}},
          {struct,#{state => {required,{enum,[<<"ready">>]}}}},
          {struct,
           #{error => {required,binstr},
             state => {required,{enum,[<<"failed">>]}}}},
          {struct,#{state => {required,{enum,[<<"cancelled">>]}}}}]},
       <<"Duration">> =>
        {struct,#{nanos => {required,integer},secs => {required,integer}}},
       <<"AskForApproval">> =>
        {any_of,
         [{enum,[<<"untrusted">>]},
          {enum,[<<"on-failure">>]},
          {enum,[<<"on-request">>]},
          {enum,[<<"never">>]}]},
       <<"McpInvocation">> =>
        {struct,
         #{arguments => {optional,term},
           server => {required,binstr},
           tool => {required,binstr}}},
       <<"TurnCompletedNotification">> =>
        {struct,
         #{threadId => {required,binstr},turn => {required,{ref,<<"Turn">>}}}},
       <<"ReasoningEffort">> =>
        {enum,
         [<<"none">>,<<"minimal">>,<<"low">>,<<"medium">>,<<"high">>,
          <<"xhigh">>]},
       <<"ResponseItem">> =>
        {any_of,
         [{struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"message">>]}},
             content => {required,{list,{ref,<<"ContentItem">>}}},
             end_turn => {optional,{any_of,[boolean,{exact,null}]}},
             phase =>
              {optional,{any_of,[{ref,<<"MessagePhase">>},{exact,null}]}},
             role => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"reasoning">>]}},
             content =>
              {optional,
               {default,
                {null,
                 {any_of,
                  [{list,{ref,<<"ReasoningItemContent">>}},{exact,null}]}}}},
             summary =>
              {required,{list,{ref,<<"ReasoningItemReasoningSummary">>}}},
             encrypted_content => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {required,{ref,<<"LocalShellStatus">>}},
             type => {required,{enum,[<<"local_shell_call">>]}},
             action => {required,{ref,<<"LocalShellAction">>}},
             call_id => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             name => {required,binstr},
             type => {required,{enum,[<<"function_call">>]}},
             arguments => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,{ref,<<"FunctionCallOutputPayload">>}},
             type => {required,{enum,[<<"function_call_output">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             input => {required,binstr},
             name => {required,binstr},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"custom_tool_call">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,binstr},
             type => {required,{enum,[<<"custom_tool_call_output">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"web_search_call">>]}},
             action =>
              {optional,
               {any_of,[{ref,<<"WebSearchAction2">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"ghost_snapshot">>]}},
             ghost_commit => {required,{ref,<<"GhostCommit">>}}}},
          {struct,
           #{type => {required,{enum,[<<"compaction">>]}},
             encrypted_content => {required,binstr}}},
          {struct,#{type => {required,{enum,[<<"other">>]}}}}]},
       <<"TextPosition">> =>
        {struct,#{line => {required,integer},column => {required,integer}}},
       <<"MessagePhase">> => {enum,[<<"commentary">>,<<"final_answer">>]},
       <<"ReasoningSummaryTextDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr},
           summaryIndex => {required,integer}}},
       <<"RemoteSkillSummary">> =>
        {struct,
         #{id => {required,binstr},
           name => {required,binstr},
           description => {required,binstr}}},
       <<"ParsedCommand">> =>
        {any_of,
         [{struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"read">>]}},
             path => {required,binstr},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"list_files">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"search">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr},
             query => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"unknown">>]}},
             cmd => {required,binstr}}}]},
       <<"FunctionCallOutputPayload">> =>
        {struct,
         #{success => {optional,{any_of,[boolean,{exact,null}]}},
           body => {required,{ref,<<"FunctionCallOutputBody">>}}}},
       <<"SandboxPolicy">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[<<"danger-full-access">>]}}}},
          {struct,#{type => {required,{enum,[<<"read-only">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"external-sandbox">>]}},
             network_access =>
              {optional,
               {default,
                {<<"restricted">>,{all_of,[{ref,<<"NetworkAccess">>}]}}}}}},
          {struct,
           #{type => {required,{enum,[<<"workspace-write">>]}},
             network_access => {optional,{default,{false,boolean}}},
             exclude_slash_tmp => {optional,{default,{false,boolean}}},
             exclude_tmpdir_env_var => {optional,{default,{false,boolean}}},
             writable_roots =>
              {optional,{list,{ref,<<"AbsolutePathBuf">>}}}}}]},
       <<"TextElement">> =>
        {struct,
         #{byteRange => {required,{all_of,[{ref,<<"ByteRange">>}]}},
           placeholder => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"McpToolCallError">> => {struct,#{message => {required,binstr}}},
       <<"TurnPlanStep">> =>
        {struct,
         #{status => {required,{ref,<<"TurnPlanStepStatus">>}},
           step => {required,binstr}}},
       <<"McpServerOauthLoginCompletedNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           name => {required,binstr},
           success => {required,boolean}}},
       <<"TextElement2">> =>
        {struct,
         #{placeholder => {optional,{any_of,[binstr,{exact,null}]}},
           byte_range => {required,{all_of,[{ref,<<"ByteRange2">>}]}}}},
       <<"TextRange">> =>
        {struct,
         #{start => {required,{ref,<<"TextPosition">>}},
           'end' => {required,{ref,<<"TextPosition">>}}}},
       <<"AccountLoginCompletedNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           success => {required,boolean},
           loginId => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"CollabAgentToolCallStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>]},
       <<"TurnPlanStepStatus">> =>
        {enum,[<<"pending">>,<<"inProgress">>,<<"completed">>]},
       <<"SubAgentSource">> =>
        {any_of,
         [{enum,[<<"review">>,<<"compact">>]},
          {struct,
           #{thread_spawn =>
              {required,
               {struct,
                #{depth => {required,integer},
                  parent_thread_id => {required,{ref,<<"ThreadId">>}}}}}}},
          {struct,#{other => {required,binstr}}}]},
       <<"ExecOutputStream">> => {enum,[<<"stdout">>,<<"stderr">>]},
       <<"ThreadTokenUsageUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           tokenUsage => {required,{ref,<<"ThreadTokenUsage">>}}}},
       <<"AgentMessageContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"Text">>]}},
             text => {required,binstr}}}]},
       <<"SessionConfiguredNotification">> =>
        {struct,
         #{rolloutPath => {required,binstr},
           model => {required,binstr},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           historyEntryCount => {required,integer},
           historyLogId => {required,integer},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
           sessionId => {required,{ref,<<"ThreadId">>}}}},
       <<"TurnStartedNotification">> =>
        {struct,
         #{threadId => {required,binstr},turn => {required,{ref,<<"Turn">>}}}},
       <<"UserInput">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"text">>]}},
             text => {required,binstr},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement">>}}}}}}},
          {struct,
           #{type => {required,{enum,[<<"image">>]}},
             url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"localImage">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"skill">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"mention">>]}},
             path => {required,binstr}}}]},
       <<"RequestUserInputQuestionOption">> =>
        {struct,
         #{label => {required,binstr},description => {required,binstr}}},
       <<"CommandExecutionStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>,<<"declined">>]},
       <<"AbsolutePathBuf">> => binstr,
       <<"FunctionCallOutputContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"input_text">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"input_image">>]}},
             image_url => {required,binstr}}}]},
       <<"ReasoningSummaryPartAddedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr},
           summaryIndex => {required,integer}}},
       <<"CommandAction">> =>
        {any_of,
         [{struct,
           #{command => {required,binstr},
             name => {required,binstr},
             type => {required,{enum,[<<"read">>]}},
             path => {required,binstr}}},
          {struct,
           #{command => {required,binstr},
             type => {required,{enum,[<<"listFiles">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{command => {required,binstr},
             type => {required,{enum,[<<"search">>]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             query => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{command => {required,binstr},
             type => {required,{enum,[<<"unknown">>]}}}}]},
       <<"PlanType">> =>
        {enum,
         [<<"free">>,<<"go">>,<<"plus">>,<<"pro">>,<<"team">>,<<"business">>,
          <<"enterprise">>,<<"edu">>,<<"unknown">>]},
       <<"SkillDependencies">> =>
        {struct,#{tools => {required,{list,{ref,<<"SkillToolDependency">>}}}}},
       <<"SkillInterface">> =>
        {struct,
         #{short_description => {optional,{any_of,[binstr,{exact,null}]}},
           brand_color => {optional,{any_of,[binstr,{exact,null}]}},
           default_prompt => {optional,{any_of,[binstr,{exact,null}]}},
           display_name => {optional,{any_of,[binstr,{exact,null}]}},
           icon_large => {optional,{any_of,[binstr,{exact,null}]}},
           icon_small => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"Resource">> =>
        {struct,
         #{name => {required,binstr},
           size => {optional,{any_of,[integer,{exact,null}]}},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           uri => {required,binstr},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ThreadId">> => binstr,
       <<"SkillsListEntry">> =>
        {struct,
         #{cwd => {required,binstr},
           errors => {required,{list,{ref,<<"SkillErrorInfo">>}}},
           skills => {required,{list,{ref,<<"SkillMetadata">>}}}}},
       <<"ConfigWarningNotification">> =>
        {struct,
         #{path => {optional,{any_of,[binstr,{exact,null}]}},
           range => {optional,{any_of,[{ref,<<"TextRange">>},{exact,null}]}},
           details => {optional,{any_of,[binstr,{exact,null}]}},
           summary => {required,binstr}}},
       <<"RateLimitSnapshot">> =>
        {struct,
         #{primary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}},
           planType => {optional,{any_of,[{ref,<<"PlanType">>},{exact,null}]}},
           credits =>
            {optional,{any_of,[{ref,<<"CreditsSnapshot">>},{exact,null}]}},
           secondary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}}}},
       <<"ReviewTarget">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[<<"uncommittedChanges">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"baseBranch">>]}},
             branch => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"commit">>]}},
             title => {optional,{any_of,[binstr,{exact,null}]}},
             sha => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"custom">>]}},
             instructions => {required,binstr}}}]},
       <<"TerminalInteractionNotification">> =>
        {struct,
         #{stdin => {required,binstr},
           threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr},
           processId => {required,binstr}}},
       <<"CollabAgentStatus">> =>
        {enum,
         [<<"pendingInit">>,<<"running">>,<<"completed">>,<<"errored">>,
          <<"shutdown">>,<<"notFound">>]},
       <<"FunctionCallOutputBody">> =>
        {any_of,[binstr,{list,{ref,<<"FunctionCallOutputContentItem">>}}]},
       <<"ThreadStartedNotification">> =>
        {struct,#{thread => {required,{ref,<<"Thread">>}}}},
       <<"CollabAgentTool">> =>
        {enum,[<<"spawnAgent">>,<<"sendInput">>,<<"wait">>,<<"closeAgent">>]},
       <<"ItemStartedNotification">> =>
        {struct,
         #{item => {required,{ref,<<"ThreadItem">>}},
           threadId => {required,binstr},
           turnId => {required,binstr}}},
       <<"RateLimitWindow">> =>
        {struct,
         #{resetsAt => {optional,{any_of,[integer,{exact,null}]}},
           usedPercent => {required,integer},
           windowDurationMins => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"McpAuthStatus">> =>
        {enum,
         [<<"unsupported">>,<<"not_logged_in">>,<<"bearer_token">>,
          <<"o_auth">>]},
       <<"SkillMetadata">> =>
        {struct,
         #{enabled => {required,boolean},
           name => {required,binstr},
           scope => {required,{ref,<<"SkillScope">>}},
           path => {required,binstr},
           interface =>
            {optional,{any_of,[{ref,<<"SkillInterface">>},{exact,null}]}},
           description => {required,binstr},
           dependencies =>
            {optional,{any_of,[{ref,<<"SkillDependencies">>},{exact,null}]}},
           short_description => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"WindowsWorldWritableWarningNotification">> =>
        {struct,
         #{extraCount => {required,integer},
           failedScan => {required,boolean},
           samplePaths => {required,{list,binstr}}}},
       <<"CallToolResult">> =>
        {struct,
         #{content => {required,{list,term}},
           structuredContent => {optional,term},
           '_meta' => {optional,term},
           isError => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"LocalShellStatus">> =>
        {enum,[<<"completed">>,<<"in_progress">>,<<"incomplete">>]},
       <<"RateLimitSnapshot2">> =>
        {struct,
         #{primary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow2">>},{exact,null}]}},
           credits =>
            {optional,{any_of,[{ref,<<"CreditsSnapshot2">>},{exact,null}]}},
           secondary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow2">>},{exact,null}]}},
           plan_type =>
            {optional,{any_of,[{ref,<<"PlanType">>},{exact,null}]}}}},
       <<"TurnError">> =>
        {struct,
         #{message => {required,binstr},
           additionalDetails =>
            {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}},
           codexErrorInfo =>
            {optional,{any_of,[{ref,<<"CodexErrorInfo">>},{exact,null}]}}}},
       <<"GhostCommit">> =>
        {struct,
         #{id => {required,binstr},
           parent => {optional,{any_of,[binstr,{exact,null}]}},
           preexisting_untracked_dirs => {required,{list,binstr}},
           preexisting_untracked_files => {required,{list,binstr}}}},
       <<"ErrorNotification">> =>
        {struct,
         #{error => {required,{ref,<<"TurnError">>}},
           threadId => {required,binstr},
           turnId => {required,binstr},
           willRetry => {required,boolean}}},
       <<"PatchApplyStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>,<<"declined">>]},
       <<"ModeKind">> => {enum,[<<"plan">>,<<"default">>]},
       <<"AuthMode">> =>
        {any_of,
         [{enum,[<<"apikey">>]},
          {enum,[<<"chatgpt">>]},
          {enum,[<<"chatgptAuthTokens">>]}]},
       <<"ReasoningItemReasoningSummary">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"summary_text">>]}},
             text => {required,binstr}}}]},
       <<"McpToolCallStatus">> =>
        {enum,[<<"inProgress">>,<<"completed">>,<<"failed">>]},
       <<"Turn">> =>
        {struct,
         #{error => {optional,{any_of,[{ref,<<"TurnError">>},{exact,null}]}},
           id => {required,binstr},
           status => {required,{ref,<<"TurnStatus">>}},
           items => {required,{list,{ref,<<"ThreadItem">>}}}}},
       <<"ThreadNameUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           threadName => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ReasoningItemContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"reasoning_text">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"text">>]}},
             text => {required,binstr}}}]},
       <<"LoginChatGptCompleteNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           success => {required,boolean},
           loginId => {required,binstr}}},
       <<"CommandExecutionOutputDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"AgentMessageDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"UserInput2">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"text">>]}},
             text => {required,binstr},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement2">>}}}}}}},
          {struct,
           #{type => {required,{enum,[<<"image">>]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"local_image">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"skill">>]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[<<"mention">>]}},
             path => {required,binstr}}}]},
       <<"Result_of_CallToolResult_or_String">> =>
        {any_of,
         [{struct,#{'Ok' => {required,{ref,<<"CallToolResult">>}}}},
          {struct,#{'Err' => {required,binstr}}}]},
       <<"Tool">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           outputSchema => {optional,term},
           inputSchema => {required,term},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}}}},
       <<"ResourceTemplate">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           annotations => {optional,term},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}},
           uriTemplate => {required,binstr}}},
       <<"AuthStatusChangeNotification">> =>
        {struct,
         #{authMethod =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}}}},
       <<"CreditsSnapshot2">> =>
        {struct,
         #{unlimited => {required,boolean},
           balance => {optional,{any_of,[binstr,{exact,null}]}},
           has_credits => {required,boolean}}},
       <<"TurnItem">> =>
        {any_of,
         [{struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"UserMessage">>]}},
             content => {required,{list,{ref,<<"UserInput2">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"AgentMessage">>]}},
             content => {required,{list,{ref,<<"AgentMessageContent">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"Plan">>]}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"Reasoning">>]}},
             raw_content => {optional,{default,{[],{list,binstr}}}},
             summary_text => {required,{list,binstr}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"WebSearch">>]}},
             query => {required,binstr},
             action => {required,{ref,<<"WebSearchAction2">>}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"ContextCompaction">>]}}}}]},
       <<"PlanItemArg">> =>
        {struct,
         #{status => {required,{ref,<<"StepStatus">>}},
           step => {required,binstr}}},
       <<"HistoryEntry">> =>
        {struct,
         #{text => {required,binstr},
           conversation_id => {required,binstr},
           ts => {required,integer}}},
       <<"ExecCommandSource">> =>
        {enum,
         [<<"agent">>,<<"user_shell">>,<<"unified_exec_startup">>,
          <<"unified_exec_interaction">>]},
       <<"RequestUserInputQuestion">> =>
        {struct,
         #{id => {required,binstr},
           header => {required,binstr},
           options =>
            {optional,
             {any_of,
              [{list,{ref,<<"RequestUserInputQuestionOption">>}},
               {exact,null}]}},
           isOther => {optional,{default,{false,boolean}}},
           isSecret => {optional,{default,{false,boolean}}},
           question => {required,binstr}}},
       <<"ThreadTokenUsage">> =>
        {struct,
         #{total => {required,{ref,<<"TokenUsageBreakdown">>}},
           last => {required,{ref,<<"TokenUsageBreakdown">>}},
           modelContextWindow => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"TurnAbortReason">> =>
        {enum,[<<"interrupted">>,<<"replaced">>,<<"review_ended">>]},
       <<"TokenUsageBreakdown">> =>
        {struct,
         #{cachedInputTokens => {required,integer},
           inputTokens => {required,integer},
           outputTokens => {required,integer},
           reasoningOutputTokens => {required,integer},
           totalTokens => {required,integer}}},
       <<"TurnStatus">> =>
        {enum,
         [<<"completed">>,<<"interrupted">>,<<"failed">>,<<"inProgress">>]},
       <<"WebSearchAction">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"search">>]}},
             query => {optional,{any_of,[binstr,{exact,null}]}},
             queries => {optional,{any_of,[{list,binstr},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"openPage">>]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"findInPage">>]}},
             pattern => {optional,{any_of,[binstr,{exact,null}]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{type => {required,{enum,[<<"other">>]}}}}]},
       <<"CreditsSnapshot">> =>
        {struct,
         #{unlimited => {required,boolean},
           balance => {optional,{any_of,[binstr,{exact,null}]}},
           hasCredits => {required,boolean}}},
       <<"StepStatus">> =>
        {enum,[<<"pending">>,<<"in_progress">>,<<"completed">>]},
       <<"CollabAgentState">> =>
        {struct,
         #{message => {optional,{any_of,[binstr,{exact,null}]}},
           status => {required,{ref,<<"CollabAgentStatus">>}}}},
       <<"FileUpdateChange">> =>
        {struct,
         #{path => {required,binstr},
           diff => {required,binstr},
           kind => {required,{ref,<<"PatchChangeKind">>}}}},
       <<"SkillErrorInfo">> =>
        {struct,#{message => {required,binstr},path => {required,binstr}}},
       <<"TokenUsageInfo">> =>
        {struct,
         #{model_context_window => {optional,{any_of,[integer,{exact,null}]}},
           last_token_usage => {required,{ref,<<"TokenUsage">>}},
           total_token_usage => {required,{ref,<<"TokenUsage">>}}}},
       <<"FileChange">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"add">>]}},
             content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"delete">>]}},
             content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"update">>]}},
             move_path => {optional,{any_of,[binstr,{exact,null}]}},
             unified_diff => {required,binstr}}}]},
       <<"CustomPrompt">> =>
        {struct,
         #{name => {required,binstr},
           path => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           content => {required,binstr},
           argument_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ByteRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"CodexErrorInfo">> =>
        {any_of,
         [{enum,
           [<<"contextWindowExceeded">>,<<"usageLimitExceeded">>,
            <<"internalServerError">>,<<"unauthorized">>,<<"badRequest">>,
            <<"threadRollbackFailed">>,<<"sandboxError">>,<<"other">>]},
          {struct,
           #{modelCap =>
              {required,
               {struct,
                #{model => {required,binstr},
                  reset_after_seconds =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{httpConnectionFailed =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{responseStreamConnectionFailed =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{responseStreamDisconnected =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{responseTooManyFailedAttempts =>
              {required,
               {struct,
                #{httpStatusCode =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}}]},
       <<"WebSearchAction2">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"search">>]}},
             query => {optional,{any_of,[binstr,{exact,null}]}},
             queries => {optional,{any_of,[{list,binstr},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"open_page">>]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"find_in_page">>]}},
             pattern => {optional,{any_of,[binstr,{exact,null}]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{type => {required,{enum,[<<"other">>]}}}}]},
       <<"AccountRateLimitsUpdatedNotification">> =>
        {struct,#{rateLimits => {required,{ref,<<"RateLimitSnapshot">>}}}},
       <<"NetworkAccess">> => {enum,[<<"restricted">>,<<"enabled">>]},
       <<"SkillScope">> =>
        {enum,[<<"user">>,<<"repo">>,<<"system">>,<<"admin">>]},
       <<"TurnPlanUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           explanation => {optional,{any_of,[binstr,{exact,null}]}},
           plan => {required,{list,{ref,<<"TurnPlanStep">>}}}}},
       <<"DeprecationNoticeNotification">> =>
        {struct,
         #{details => {optional,{any_of,[binstr,{exact,null}]}},
           summary => {required,binstr}}},
       <<"RateLimitWindow2">> =>
        {struct,
         #{resets_at => {optional,{any_of,[integer,{exact,null}]}},
           used_percent => {required,number},
           window_minutes => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"ContextCompactedNotification">> =>
        {struct,#{threadId => {required,binstr},turnId => {required,binstr}}},
       <<"ContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[<<"input_text">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"input_image">>]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"output_text">>]}},
             text => {required,binstr}}}]},
       <<"RequestId">> => {any_of,[binstr,integer]},
       <<"ThreadItem">> =>
        {any_of,
         [{struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"userMessage">>]}},
             content => {required,{list,{ref,<<"UserInput">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"agentMessage">>]}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"plan">>]}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"reasoning">>]}},
             content => {optional,{default,{[],{list,binstr}}}},
             summary => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{command => {required,binstr},
             id => {required,binstr},
             status => {required,{ref,<<"CommandExecutionStatus">>}},
             type => {required,{enum,[<<"commandExecution">>]}},
             cwd => {required,binstr},
             exitCode => {optional,{any_of,[integer,{exact,null}]}},
             processId => {optional,{any_of,[binstr,{exact,null}]}},
             aggregatedOutput => {optional,{any_of,[binstr,{exact,null}]}},
             commandActions => {required,{list,{ref,<<"CommandAction">>}}},
             durationMs => {optional,{any_of,[integer,{exact,null}]}}}},
          {struct,
           #{id => {required,binstr},
             status => {required,{ref,<<"PatchApplyStatus">>}},
             type => {required,{enum,[<<"fileChange">>]}},
             changes => {required,{list,{ref,<<"FileUpdateChange">>}}}}},
          {struct,
           #{error =>
              {optional,{any_of,[{ref,<<"McpToolCallError">>},{exact,null}]}},
             id => {required,binstr},
             status => {required,{ref,<<"McpToolCallStatus">>}},
             type => {required,{enum,[<<"mcpToolCall">>]}},
             arguments => {required,term},
             result =>
              {optional,{any_of,[{ref,<<"McpToolCallResult">>},{exact,null}]}},
             server => {required,binstr},
             tool => {required,binstr},
             durationMs => {optional,{any_of,[integer,{exact,null}]}}}},
          {struct,
           #{id => {required,binstr},
             status =>
              {required,{all_of,[{ref,<<"CollabAgentToolCallStatus">>}]}},
             type => {required,{enum,[<<"collabAgentToolCall">>]}},
             prompt => {optional,{any_of,[binstr,{exact,null}]}},
             tool => {required,{all_of,[{ref,<<"CollabAgentTool">>}]}},
             agentsStates =>
              {required,{map,{binstr,{ref,<<"CollabAgentState">>}}}},
             receiverThreadIds => {required,{list,binstr}},
             senderThreadId => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"webSearch">>]}},
             query => {required,binstr},
             action =>
              {optional,{any_of,[{ref,<<"WebSearchAction">>},{exact,null}]}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"imageView">>]}},
             path => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"enteredReviewMode">>]}},
             review => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"exitedReviewMode">>]}},
             review => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[<<"contextCompaction">>]}}}}]},
       <<"PlanDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"RawResponseItemCompletedNotification">> =>
        {struct,
         #{item => {required,{ref,<<"ResponseItem">>}},
           threadId => {required,binstr},
           turnId => {required,binstr}}},
       <<"SkillToolDependency">> =>
        {struct,
         #{command => {optional,{any_of,[binstr,{exact,null}]}},
           type => {required,binstr},
           value => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           url => {optional,{any_of,[binstr,{exact,null}]}},
           transport => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"McpToolCallResult">> =>
        {struct,
         #{content => {required,{list,term}},
           structuredContent => {optional,term}}},
       <<"SessionSource">> =>
        {any_of,
         [{enum,
           [<<"cli">>,<<"vscode">>,<<"exec">>,<<"appServer">>,<<"unknown">>]},
          {struct,#{subAgent => {required,{ref,<<"SubAgentSource">>}}}}]},
       <<"EventMsg">> =>
        {any_of,
         [{struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"error">>]}},
             codex_error_info =>
              {optional,
               {default,
                {null,{any_of,[{ref,<<"CodexErrorInfo2">>},{exact,null}]}}}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"warning">>]}}}},
          {struct,#{type => {required,{enum,[<<"context_compacted">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"thread_rolled_back">>]}},
             num_turns => {required,integer}}},
          {struct,
           #{type => {required,{enum,[<<"task_started">>]}},
             model_context_window =>
              {optional,{any_of,[integer,{exact,null}]}},
             collaboration_mode_kind =>
              {optional,
               {default,{<<"default">>,{all_of,[{ref,<<"ModeKind">>}]}}}}}},
          {struct,
           #{type => {required,{enum,[<<"task_complete">>]}},
             last_agent_message => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{info =>
              {optional,{any_of,[{ref,<<"TokenUsageInfo">>},{exact,null}]}},
             type => {required,{enum,[<<"token_count">>]}},
             rate_limits =>
              {optional,
               {any_of,[{ref,<<"RateLimitSnapshot2">>},{exact,null}]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"agent_message">>]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"user_message">>]}},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement2">>}}}}},
             images => {optional,{any_of,[{list,binstr},{exact,null}]}},
             local_images => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{type => {required,{enum,[<<"agent_message_delta">>]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning">>]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning_delta">>]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning_raw_content">>]}},
             text => {required,binstr}}},
          {struct,
           #{type =>
              {required,{enum,[<<"agent_reasoning_raw_content_delta">>]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_reasoning_section_break">>]}},
             item_id => {optional,{default,{<<>>,binstr}}},
             summary_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[<<"session_configured">>]}},
             cwd => {required,binstr},
             model => {required,binstr},
             reasoning_effort =>
              {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
             approval_policy =>
              {required,{all_of,[{ref,<<"AskForApproval">>}]}},
             forked_from_id =>
              {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}},
             history_entry_count => {required,integer},
             history_log_id => {required,integer},
             initial_messages =>
              {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
             model_provider_id => {required,binstr},
             rollout_path => {optional,{any_of,[binstr,{exact,null}]}},
             sandbox_policy => {required,{all_of,[{ref,<<"SandboxPolicy">>}]}},
             session_id => {required,{ref,<<"ThreadId">>}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"thread_name_updated">>]}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}},
             thread_id => {required,{ref,<<"ThreadId">>}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"McpStartupStatus">>}]}},
             type => {required,{enum,[<<"mcp_startup_update">>]}},
             server => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_startup_complete">>]}},
             cancelled => {required,{list,binstr}},
             failed => {required,{list,{ref,<<"McpStartupFailure">>}}},
             ready => {required,{list,binstr}}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_tool_call_begin">>]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_tool_call_end">>]}},
             result =>
              {required,
               {all_of,[{ref,<<"Result_of_CallToolResult_or_String">>}]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}},
             duration => {required,{ref,<<"Duration">>}}}},
          {struct,
           #{type => {required,{enum,[<<"web_search_begin">>]}},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"web_search_end">>]}},
             query => {required,binstr},
             action => {required,{ref,<<"WebSearchAction2">>}},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[<<"exec_command_begin">>]}},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr}}},
          {struct,
           #{stream => {required,{all_of,[{ref,<<"ExecOutputStream">>}]}},
             type => {required,{enum,[<<"exec_command_output_delta">>]}},
             chunk => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"terminal_interaction">>]}},
             stdin => {required,binstr},
             call_id => {required,binstr},
             process_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[<<"exec_command_end">>]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             duration => {required,{all_of,[{ref,<<"Duration">>}]}},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr},
             aggregated_output => {optional,{default,{<<>>,binstr}}},
             exit_code => {required,integer},
             formatted_output => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"view_image_tool_call">>]}},
             path => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"exec_approval_request">>]}},
             cwd => {required,binstr},
             proposed_execpolicy_amendment =>
              {optional,{any_of,[{list,binstr},{exact,null}]}},
             call_id => {required,binstr},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[<<"request_user_input">>]}},
             questions =>
              {required,{list,{ref,<<"RequestUserInputQuestion">>}}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[<<"dynamic_tool_call_request">>]}},
             arguments => {required,term},
             callId => {required,binstr},
             tool => {required,binstr},
             turnId => {required,binstr}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             message => {required,binstr},
             type => {required,{enum,[<<"elicitation_request">>]}},
             server_name => {required,binstr}}},
          {struct,
           #{reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"apply_patch_approval_request">>]}},
             call_id => {required,binstr},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             turn_id => {optional,{default,{<<>>,binstr}}},
             grant_root => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"deprecation_notice">>]}},
             details => {optional,{any_of,[binstr,{exact,null}]}},
             summary => {required,binstr}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"background_event">>]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"undo_started">>]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[<<"undo_completed">>]}},
             success => {required,boolean}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[<<"stream_error">>]}},
             codex_error_info =>
              {optional,
               {default,
                {null,{any_of,[{ref,<<"CodexErrorInfo2">>},{exact,null}]}}}},
             additional_details =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}}}},
          {struct,
           #{type => {required,{enum,[<<"patch_apply_begin">>]}},
             call_id => {required,binstr},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             turn_id => {optional,{default,{<<>>,binstr}}},
             auto_approved => {required,boolean}}},
          {struct,
           #{type => {required,{enum,[<<"patch_apply_end">>]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             success => {required,boolean},
             call_id => {required,binstr},
             changes =>
              {optional,{default,{#{},{map,{binstr,{ref,<<"FileChange">>}}}}}},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[<<"turn_diff">>]}},
             unified_diff => {required,binstr}}},
          {struct,
           #{offset => {required,integer},
             type => {required,{enum,[<<"get_history_entry_response">>]}},
             entry =>
              {optional,{any_of,[{ref,<<"HistoryEntry">>},{exact,null}]}},
             log_id => {required,integer}}},
          {struct,
           #{type => {required,{enum,[<<"mcp_list_tools_response">>]}},
             tools => {required,{map,{binstr,{ref,<<"Tool">>}}}},
             resources =>
              {required,{map,{binstr,{list,{ref,<<"Resource">>}}}}},
             auth_statuses =>
              {required,{map,{binstr,{ref,<<"McpAuthStatus">>}}}},
             resource_templates =>
              {required,{map,{binstr,{list,{ref,<<"ResourceTemplate">>}}}}}}},
          {struct,
           #{type => {required,{enum,[<<"list_custom_prompts_response">>]}},
             custom_prompts => {required,{list,{ref,<<"CustomPrompt">>}}}}},
          {struct,
           #{type => {required,{enum,[<<"list_skills_response">>]}},
             skills => {required,{list,{ref,<<"SkillsListEntry">>}}}}},
          {struct,
           #{type => {required,{enum,[<<"list_remote_skills_response">>]}},
             skills => {required,{list,{ref,<<"RemoteSkillSummary">>}}}}},
          {struct,
           #{id => {required,binstr},
             name => {required,binstr},
             type => {required,{enum,[<<"remote_skill_downloaded">>]}},
             path => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"skills_update_available">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"plan_update">>]}},
             explanation =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}},
             plan => {required,{list,{ref,<<"PlanItemArg">>}}}}},
          {struct,
           #{reason => {required,{ref,<<"TurnAbortReason">>}},
             type => {required,{enum,[<<"turn_aborted">>]}}}},
          {struct,#{type => {required,{enum,[<<"shutdown_complete">>]}}}},
          {struct,
           #{type => {required,{enum,[<<"entered_review_mode">>]}},
             target => {required,{ref,<<"ReviewTarget">>}},
             user_facing_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"exited_review_mode">>]}},
             review_output =>
              {optional,
               {any_of,[{ref,<<"ReviewOutputEvent">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"raw_response_item">>]}},
             item => {required,{ref,<<"ResponseItem">>}}}},
          {struct,
           #{type => {required,{enum,[<<"item_started">>]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"item_completed">>]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"agent_message_content_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"plan_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"reasoning_content_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             summary_index => {optional,{default,{0,integer}}},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[<<"reasoning_raw_content_delta">>]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr},
             content_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_agent_spawn_begin">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[<<"collab_agent_spawn_end">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             new_thread_id =>
              {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_agent_interaction_begin">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[<<"collab_agent_interaction_end">>]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_waiting_begin">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_ids => {required,{list,{ref,<<"ThreadId">>}}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_waiting_end">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             statuses => {required,{map,{binstr,{ref,<<"AgentStatus">>}}}}}},
          {struct,
           #{type => {required,{enum,[<<"collab_close_begin">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[<<"collab_close_end">>]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"ThreadId">>}]}}}}]},
       <<"AgentStatus">> =>
        {any_of,
         [{enum,[<<"pending_init">>]},
          {enum,[<<"running">>]},
          {struct,#{completed => {required,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{errored => {required,binstr}}},
          {enum,[<<"shutdown">>]},
          {enum,[<<"not_found">>]}]},
       <<"ItemCompletedNotification">> =>
        {struct,
         #{item => {required,{ref,<<"ThreadItem">>}},
           threadId => {required,binstr},
           turnId => {required,binstr}}},
       <<"TurnDiffUpdatedNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           diff => {required,binstr}}},
       <<"FileChangeOutputDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr}}},
       <<"GitInfo">> =>
        {struct,
         #{sha => {optional,{any_of,[binstr,{exact,null}]}},
           branch => {optional,{any_of,[binstr,{exact,null}]}},
           originUrl => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ReviewCodeLocation">> =>
        {struct,
         #{absolute_file_path => {required,binstr},
           line_range => {required,{ref,<<"ReviewLineRange">>}}}},
       <<"TokenUsage">> =>
        {struct,
         #{cached_input_tokens => {required,integer},
           input_tokens => {required,integer},
           output_tokens => {required,integer},
           reasoning_output_tokens => {required,integer},
           total_tokens => {required,integer}}},
       <<"ByteRange2">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"McpStartupFailure">> =>
        {struct,#{error => {required,binstr},server => {required,binstr}}},
       <<"ReviewOutputEvent">> =>
        {struct,
         #{findings => {required,{list,{ref,<<"ReviewFinding">>}}},
           overall_confidence_score => {required,number},
           overall_correctness => {required,binstr},
           overall_explanation => {required,binstr}}},
       <<"ReviewLineRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"ReviewFinding">> =>
        {struct,
         #{priority => {required,integer},
           title => {required,binstr},
           body => {required,binstr},
           code_location => {required,{ref,<<"ReviewCodeLocation">>}},
           confidence_score => {required,number}}},
       <<"ReasoningTextDeltaNotification">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           delta => {required,binstr},
           itemId => {required,binstr},
           contentIndex => {required,integer}}},
       <<"AccountUpdatedNotification">> =>
        {struct,
         #{authMode =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}}}},
       <<"CodexErrorInfo2">> =>
        {any_of,
         [{enum,
           [<<"context_window_exceeded">>,<<"usage_limit_exceeded">>,
            <<"internal_server_error">>,<<"unauthorized">>,<<"bad_request">>,
            <<"sandbox_error">>,<<"thread_rollback_failed">>,<<"other">>]},
          {struct,
           #{model_cap =>
              {required,
               {struct,
                #{model => {required,binstr},
                  reset_after_seconds =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{http_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_disconnected =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_too_many_failed_attempts =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}}]},
       <<"LocalShellAction">> =>
        {any_of,
         [{struct,
           #{command => {required,{list,binstr}},
             env => {optional,{any_of,[{map,{binstr,term}},{exact,null}]}},
             type => {required,{enum,[<<"exec">>]}},
             user => {optional,{any_of,[binstr,{exact,null}]}},
             timeout_ms => {optional,{any_of,[integer,{exact,null}]}},
             working_directory =>
              {optional,{any_of,[binstr,{exact,null}]}}}}]},
       <<"Thread">> =>
        {struct,
         #{id => {required,binstr},
           path => {optional,{any_of,[binstr,{exact,null}]}},
           source => {required,{all_of,[{ref,<<"SessionSource">>}]}},
           cwd => {required,binstr},
           modelProvider => {required,binstr},
           cliVersion => {required,binstr},
           gitInfo => {optional,{any_of,[{ref,<<"GitInfo">>},{exact,null}]}},
           preview => {required,binstr},
           updatedAt => {required,integer},
           createdAt => {required,integer},
           turns => {required,{list,{ref,<<"Turn">>}}}}}},
     {any_of,
      [{struct,
        #{params => {required,{ref,<<"ErrorNotification">>}},
          method => {required,{enum,[<<"error">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ThreadStartedNotification">>}},
          method => {required,{enum,[<<"thread/started">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ThreadNameUpdatedNotification">>}},
          method => {required,{enum,[<<"thread/name/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ThreadTokenUsageUpdatedNotification">>}},
          method => {required,{enum,[<<"thread/tokenUsage/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnStartedNotification">>}},
          method => {required,{enum,[<<"turn/started">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnCompletedNotification">>}},
          method => {required,{enum,[<<"turn/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnDiffUpdatedNotification">>}},
          method => {required,{enum,[<<"turn/diff/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TurnPlanUpdatedNotification">>}},
          method => {required,{enum,[<<"turn/plan/updated">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ItemStartedNotification">>}},
          method => {required,{enum,[<<"item/started">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ItemCompletedNotification">>}},
          method => {required,{enum,[<<"item/completed">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"RawResponseItemCompletedNotification">>}},
          method => {required,{enum,[<<"rawResponseItem/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AgentMessageDeltaNotification">>}},
          method => {required,{enum,[<<"item/agentMessage/delta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"PlanDeltaNotification">>}},
          method => {required,{enum,[<<"item/plan/delta">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"CommandExecutionOutputDeltaNotification">>}},
          method =>
           {required,{enum,[<<"item/commandExecution/outputDelta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"TerminalInteractionNotification">>}},
          method =>
           {required,
            {enum,[<<"item/commandExecution/terminalInteraction">>]}}}},
       {struct,
        #{params => {required,{ref,<<"FileChangeOutputDeltaNotification">>}},
          method => {required,{enum,[<<"item/fileChange/outputDelta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"McpToolCallProgressNotification">>}},
          method => {required,{enum,[<<"item/mcpToolCall/progress">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"McpServerOauthLoginCompletedNotification">>}},
          method => {required,{enum,[<<"mcpServer/oauthLogin/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AccountUpdatedNotification">>}},
          method => {required,{enum,[<<"account/updated">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"AccountRateLimitsUpdatedNotification">>}},
          method => {required,{enum,[<<"account/rateLimits/updated">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"ReasoningSummaryTextDeltaNotification">>}},
          method =>
           {required,{enum,[<<"item/reasoning/summaryTextDelta">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"ReasoningSummaryPartAddedNotification">>}},
          method =>
           {required,{enum,[<<"item/reasoning/summaryPartAdded">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ReasoningTextDeltaNotification">>}},
          method => {required,{enum,[<<"item/reasoning/textDelta">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ContextCompactedNotification">>}},
          method => {required,{enum,[<<"thread/compacted">>]}}}},
       {struct,
        #{params => {required,{ref,<<"DeprecationNoticeNotification">>}},
          method => {required,{enum,[<<"deprecationNotice">>]}}}},
       {struct,
        #{params => {required,{ref,<<"ConfigWarningNotification">>}},
          method => {required,{enum,[<<"configWarning">>]}}}},
       {struct,
        #{params =>
           {required,{ref,<<"WindowsWorldWritableWarningNotification">>}},
          method => {required,{enum,[<<"windows/worldWritableWarning">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AccountLoginCompletedNotification">>}},
          method => {required,{enum,[<<"account/login/completed">>]}}}},
       {struct,
        #{params => {required,{ref,<<"AuthStatusChangeNotification">>}},
          method => {required,{enum,[<<"authStatusChange">>]}}}},
       {struct,
        #{params => {required,{ref,<<"LoginChatGptCompleteNotification">>}},
          method => {required,{enum,[<<"loginChatGptComplete">>]}}}},
       {struct,
        #{params => {required,{ref,<<"SessionConfiguredNotification">>}},
          method => {required,{enum,[<<"sessionConfigured">>]}}}}]}}}}.
