#{to_json =>
      {with_defs,{#{<<"JSONRPCError">> =>
                        {struct,#{error =>
                                      {required,{ref,<<"JSONRPCErrorError">>}},
                                  id => {required,{ref,<<"RequestId">>}}}},
                    <<"JSONRPCErrorError">> =>
                        {struct,#{code => {required,integer},
                                  data => {optional,term},
                                  message => {required,binstr}}},
                    <<"JSONRPCNotification">> =>
                        {struct,#{params => {optional,term},
                                  method => {required,binstr}}},
                    <<"JSONRPCRequest">> =>
                        {struct,#{id => {required,{ref,<<"RequestId">>}},
                                  params => {optional,term},
                                  method => {required,binstr}}},
                    <<"JSONRPCResponse">> =>
                        {struct,#{id => {required,{ref,<<"RequestId">>}},
                                  result => {required,term}}},
                    <<"RequestId">> => {any_of,[binstr,integer]}},
                  {any_of,[{ref,<<"JSONRPCRequest">>},
                           {ref,<<"JSONRPCNotification">>},
                           {ref,<<"JSONRPCResponse">>},
                           {ref,<<"JSONRPCError">>}]}}},
  from_json =>
      {with_defs,{#{<<"JSONRPCError">> =>
                        {struct,#{error =>
                                      {required,{ref,<<"JSONRPCErrorError">>}},
                                  id => {required,{ref,<<"RequestId">>}}}},
                    <<"JSONRPCErrorError">> =>
                        {struct,#{code => {required,integer},
                                  data => {optional,term},
                                  message => {required,binstr}}},
                    <<"JSONRPCNotification">> =>
                        {struct,#{params => {optional,term},
                                  method => {required,binstr}}},
                    <<"JSONRPCRequest">> =>
                        {struct,#{id => {required,{ref,<<"RequestId">>}},
                                  params => {optional,term},
                                  method => {required,binstr}}},
                    <<"JSONRPCResponse">> =>
                        {struct,#{id => {required,{ref,<<"RequestId">>}},
                                  result => {required,term}}},
                    <<"RequestId">> => {any_of,[binstr,integer]}},
                  {any_of,[{ref,<<"JSONRPCRequest">>},
                           {ref,<<"JSONRPCNotification">>},
                           {ref,<<"JSONRPCResponse">>},
                           {ref,<<"JSONRPCError">>}]}}}}.
