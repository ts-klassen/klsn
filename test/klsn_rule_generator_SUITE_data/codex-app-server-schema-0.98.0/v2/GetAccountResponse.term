#{to_json =>
      {with_defs,
          {#{<<"Account">> =>
                 {any_of,
                     [{struct,#{type => {required,{enum,[apiKey]}}}},
                      {struct,
                          #{type => {required,{enum,[chatgpt]}},
                            planType => {required,{ref,<<"PlanType">>}},
                            email => {required,binstr}}}]},
             <<"PlanType">> =>
                 {enum,
                     [free,go,plus,pro,team,business,enterprise,edu,unknown]}},
           {struct,
               #{requiresOpenaiAuth => {required,boolean},
                 account =>
                     {optional,
                         {any_of,[{ref,<<"Account">>},{exact,null}]}}}}}},
  from_json =>
      {with_defs,
          {#{<<"Account">> =>
                 {any_of,
                     [{struct,#{type => {required,{enum,[apiKey]}}}},
                      {struct,
                          #{type => {required,{enum,[chatgpt]}},
                            planType => {required,{ref,<<"PlanType">>}},
                            email => {required,binstr}}}]},
             <<"PlanType">> =>
                 {enum,
                     [free,go,plus,pro,team,business,enterprise,edu,unknown]}},
           {struct,
               #{requiresOpenaiAuth => {required,boolean},
                 account =>
                     {optional,
                         {any_of,[{ref,<<"Account">>},{exact,null}]}}}}}}}.
