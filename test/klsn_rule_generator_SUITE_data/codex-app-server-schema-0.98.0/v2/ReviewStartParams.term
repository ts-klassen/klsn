#{to_json =>
      {with_defs,
          {#{<<"ReviewDelivery">> => {enum,[<<"inline">>,<<"detached">>]},
             <<"ReviewTarget">> =>
                 {any_of,
                     [{struct,
                          #{type =>
                                {required,{enum,[<<"uncommittedChanges">>]}}}},
                      {struct,
                          #{type => {required,{enum,[<<"baseBranch">>]}},
                            branch => {required,binstr}}},
                      {struct,
                          #{type => {required,{enum,[<<"commit">>]}},
                            title => {optional,{any_of,[binstr,{exact,null}]}},
                            sha => {required,binstr}}},
                      {struct,
                          #{type => {required,{enum,[<<"custom">>]}},
                            instructions => {required,binstr}}}]}},
           {struct,
               #{threadId => {required,binstr},
                 delivery =>
                     {optional,
                         {default,
                             {null,
                                 {any_of,
                                     [{ref,<<"ReviewDelivery">>},
                                      {exact,null}]}}}},
                 target => {required,{ref,<<"ReviewTarget">>}}}}}},
  from_json =>
      {with_defs,
          {#{<<"ReviewDelivery">> => {enum,[<<"inline">>,<<"detached">>]},
             <<"ReviewTarget">> =>
                 {any_of,
                     [{struct,
                          #{type =>
                                {required,{enum,[<<"uncommittedChanges">>]}}}},
                      {struct,
                          #{type => {required,{enum,[<<"baseBranch">>]}},
                            branch => {required,binstr}}},
                      {struct,
                          #{type => {required,{enum,[<<"commit">>]}},
                            title => {optional,{any_of,[binstr,{exact,null}]}},
                            sha => {required,binstr}}},
                      {struct,
                          #{type => {required,{enum,[<<"custom">>]}},
                            instructions => {required,binstr}}}]}},
           {struct,
               #{threadId => {required,binstr},
                 delivery =>
                     {optional,
                         {default,
                             {null,
                                 {any_of,
                                     [{ref,<<"ReviewDelivery">>},
                                      {exact,null}]}}}},
                 target => {required,{ref,<<"ReviewTarget">>}}}}}}}.
