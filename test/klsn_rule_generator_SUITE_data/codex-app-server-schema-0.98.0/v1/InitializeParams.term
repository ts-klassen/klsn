#{to_json =>
      {with_defs,
          {#{<<"ClientInfo">> =>
                 {struct,
                     #{name => {required,binstr},
                       version => {required,binstr},
                       title => {optional,{any_of,[binstr,{exact,null}]}}}},
             <<"InitializeCapabilities">> =>
                 {struct,
                     #{experimentalApi =>
                           {optional,{default,{false,boolean}}}}}},
           {struct,
               #{capabilities =>
                     {optional,
                         {any_of,
                             [{ref,<<"InitializeCapabilities">>},
                              {exact,null}]}},
                 clientInfo => {required,{ref,<<"ClientInfo">>}}}}}},
  from_json =>
      {with_defs,
          {#{<<"ClientInfo">> =>
                 {struct,
                     #{name => {required,binstr},
                       version => {required,binstr},
                       title => {optional,{any_of,[binstr,{exact,null}]}}}},
             <<"InitializeCapabilities">> =>
                 {struct,
                     #{experimentalApi =>
                           {optional,{default,{false,boolean}}}}}},
           {struct,
               #{capabilities =>
                     {optional,
                         {any_of,
                             [{ref,<<"InitializeCapabilities">>},
                              {exact,null}]}},
                 clientInfo => {required,{ref,<<"ClientInfo">>}}}}}}}.
