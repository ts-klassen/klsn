#{to_json =>
   {with_defs,
    {#{<<"SendUserMessageResponse">> => {map,{binstr,term}},
       <<"JSONRPCResponse">> =>
        {struct,
         #{id => {required,{ref,<<"RequestId">>}},result => {required,term}}},
       <<"ConversationGitInfo">> =>
        {struct,
         #{branch => {optional,{any_of,[binstr,{exact,null}]}},
           sha => {optional,{any_of,[binstr,{exact,null}]}},
           origin_url => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"McpStartupStatus">> =>
        {any_of,
         [{struct,#{state => {required,{enum,[starting]}}}},
          {struct,#{state => {required,{enum,[ready]}}}},
          {struct,
           #{error => {required,binstr},state => {required,{enum,[failed]}}}},
          {struct,#{state => {required,{enum,[cancelled]}}}}]},
       <<"GetUserSavedConfigResponse">> =>
        {struct,#{config => {required,{ref,<<"UserSavedConfig">>}}}},
       <<"Duration">> =>
        {struct,#{nanos => {required,integer},secs => {required,integer}}},
       <<"ListConversationsParams">> =>
        {struct,
         #{cursor => {optional,{any_of,[binstr,{exact,null}]}},
           modelProviders => {optional,{any_of,[{list,binstr},{exact,null}]}},
           pageSize => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"ArchiveConversationParams">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           rolloutPath => {required,binstr}}},
       <<"AskForApproval">> =>
        {any_of,
         [{enum,[untrusted]},
          {enum,['on-failure']},
          {enum,['on-request']},
          {enum,[never]}]},
       <<"McpInvocation">> =>
        {struct,
         #{arguments => {optional,term},
           server => {required,binstr},
           tool => {required,binstr}}},
       <<"ServerNotification">> =>
        {any_of,
         [{struct,
           #{params => {required,{ref,<<"v2/ErrorNotification">>}},
             method => {required,{enum,[error]}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ThreadStartedNotification">>}},
             method => {required,{enum,['thread/started']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ThreadNameUpdatedNotification">>}},
             method => {required,{enum,['thread/name/updated']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ThreadTokenUsageUpdatedNotification">>}},
             method => {required,{enum,['thread/tokenUsage/updated']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnStartedNotification">>}},
             method => {required,{enum,['turn/started']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnCompletedNotification">>}},
             method => {required,{enum,['turn/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnDiffUpdatedNotification">>}},
             method => {required,{enum,['turn/diff/updated']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnPlanUpdatedNotification">>}},
             method => {required,{enum,['turn/plan/updated']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ItemStartedNotification">>}},
             method => {required,{enum,['item/started']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ItemCompletedNotification">>}},
             method => {required,{enum,['item/completed']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/RawResponseItemCompletedNotification">>}},
             method => {required,{enum,['rawResponseItem/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/AgentMessageDeltaNotification">>}},
             method => {required,{enum,['item/agentMessage/delta']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/PlanDeltaNotification">>}},
             method => {required,{enum,['item/plan/delta']}}}},
          {struct,
           #{params =>
              {required,
               {ref,<<"v2/CommandExecutionOutputDeltaNotification">>}},
             method =>
              {required,{enum,['item/commandExecution/outputDelta']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/TerminalInteractionNotification">>}},
             method =>
              {required,
               {enum,['item/commandExecution/terminalInteraction']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/FileChangeOutputDeltaNotification">>}},
             method => {required,{enum,['item/fileChange/outputDelta']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/McpToolCallProgressNotification">>}},
             method => {required,{enum,['item/mcpToolCall/progress']}}}},
          {struct,
           #{params =>
              {required,
               {ref,<<"v2/McpServerOauthLoginCompletedNotification">>}},
             method => {required,{enum,['mcpServer/oauthLogin/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/AccountUpdatedNotification">>}},
             method => {required,{enum,['account/updated']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/AccountRateLimitsUpdatedNotification">>}},
             method => {required,{enum,['account/rateLimits/updated']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ReasoningSummaryTextDeltaNotification">>}},
             method => {required,{enum,['item/reasoning/summaryTextDelta']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ReasoningSummaryPartAddedNotification">>}},
             method => {required,{enum,['item/reasoning/summaryPartAdded']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ReasoningTextDeltaNotification">>}},
             method => {required,{enum,['item/reasoning/textDelta']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ContextCompactedNotification">>}},
             method => {required,{enum,['thread/compacted']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/DeprecationNoticeNotification">>}},
             method => {required,{enum,[deprecationNotice]}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ConfigWarningNotification">>}},
             method => {required,{enum,[configWarning]}}}},
          {struct,
           #{params =>
              {required,
               {ref,<<"v2/WindowsWorldWritableWarningNotification">>}},
             method => {required,{enum,['windows/worldWritableWarning']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/AccountLoginCompletedNotification">>}},
             method => {required,{enum,['account/login/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"AuthStatusChangeNotification">>}},
             method => {required,{enum,[authStatusChange]}}}},
          {struct,
           #{params => {required,{ref,<<"LoginChatGptCompleteNotification">>}},
             method => {required,{enum,[loginChatGptComplete]}}}},
          {struct,
           #{params => {required,{ref,<<"SessionConfiguredNotification">>}},
             method => {required,{enum,[sessionConfigured]}}}}]},
       <<"ReasoningEffort">> => {enum,[none,minimal,low,medium,high,xhigh]},
       <<"ResponseItem">> =>
        {any_of,
         [{struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[message]}},
             phase =>
              {optional,{any_of,[{ref,<<"MessagePhase">>},{exact,null}]}},
             content => {required,{list,{ref,<<"ContentItem">>}}},
             end_turn => {optional,{any_of,[boolean,{exact,null}]}},
             role => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[reasoning]}},
             content =>
              {optional,
               {default,
                {null,
                 {any_of,
                  [{list,{ref,<<"ReasoningItemContent">>}},{exact,null}]}}}},
             summary =>
              {required,{list,{ref,<<"ReasoningItemReasoningSummary">>}}},
             encrypted_content => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {required,{ref,<<"LocalShellStatus">>}},
             type => {required,{enum,[local_shell_call]}},
             action => {required,{ref,<<"LocalShellAction">>}},
             call_id => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             name => {required,binstr},
             type => {required,{enum,[function_call]}},
             arguments => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,{ref,<<"FunctionCallOutputPayload">>}},
             type => {required,{enum,[function_call_output]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             input => {required,binstr},
             name => {required,binstr},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[custom_tool_call]}},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,binstr},
             type => {required,{enum,[custom_tool_call_output]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[web_search_call]}},
             action =>
              {optional,{any_of,[{ref,<<"WebSearchAction">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[ghost_snapshot]}},
             ghost_commit => {required,{ref,<<"GhostCommit">>}}}},
          {struct,
           #{type => {required,{enum,[compaction]}},
             encrypted_content => {required,binstr}}},
          {struct,#{type => {required,{enum,[other]}}}}]},
       <<"AddConversationListenerParams">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           experimentalRawEvents => {optional,{default,{false,boolean}}}}},
       <<"ClientNotification">> =>
        {any_of,[{struct,#{method => {required,{enum,[initialized]}}}}]},
       <<"MessagePhase">> => {enum,[commentary,final_answer]},
       <<"RemoteSkillSummary">> =>
        {struct,
         #{id => {required,binstr},
           name => {required,binstr},
           description => {required,binstr}}},
       <<"ParsedCommand">> =>
        {any_of,
         [{struct,
           #{name => {required,binstr},
             type => {required,{enum,[read]}},
             path => {required,binstr},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[list_files]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[search]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr},
             query => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[unknown]}},cmd => {required,binstr}}}]},
       <<"FunctionCallOutputPayload">> =>
        {struct,
         #{success => {optional,{any_of,[boolean,{exact,null}]}},
           body => {required,{ref,<<"FunctionCallOutputBody">>}}}},
       <<"JSONRPCNotification">> =>
        {struct,#{params => {optional,term},method => {required,binstr}}},
       <<"UserSavedConfig">> =>
        {struct,
         #{profile => {optional,{any_of,[binstr,{exact,null}]}},
           tools => {optional,{any_of,[{ref,<<"Tools">>},{exact,null}]}},
           model => {optional,{any_of,[binstr,{exact,null}]}},
           approvalPolicy =>
            {optional,{any_of,[{ref,<<"AskForApproval">>},{exact,null}]}},
           modelReasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           modelReasoningSummary =>
            {optional,{any_of,[{ref,<<"ReasoningSummary">>},{exact,null}]}},
           modelVerbosity =>
            {optional,{any_of,[{ref,<<"Verbosity">>},{exact,null}]}},
           forcedChatgptWorkspaceId =>
            {optional,{any_of,[binstr,{exact,null}]}},
           forcedLoginMethod =>
            {optional,{any_of,[{ref,<<"ForcedLoginMethod">>},{exact,null}]}},
           profiles => {required,{map,{binstr,{ref,<<"Profile">>}}}},
           sandboxMode =>
            {optional,{any_of,[{ref,<<"SandboxMode">>},{exact,null}]}},
           sandboxSettings =>
            {optional,{any_of,[{ref,<<"SandboxSettings">>},{exact,null}]}}}},
       <<"SandboxPolicy">> =>
        {any_of,
         [{struct,#{type => {required,{enum,['danger-full-access']}}}},
          {struct,#{type => {required,{enum,['read-only']}}}},
          {struct,
           #{type => {required,{enum,['external-sandbox']}},
             network_access =>
              {optional,
               {default,
                {<<"restricted">>,{all_of,[{ref,<<"NetworkAccess">>}]}}}}}},
          {struct,
           #{type => {required,{enum,['workspace-write']}},
             network_access => {optional,{default,{false,boolean}}},
             exclude_slash_tmp => {optional,{default,{false,boolean}}},
             exclude_tmpdir_env_var => {optional,{default,{false,boolean}}},
             writable_roots =>
              {optional,{list,{ref,<<"AbsolutePathBuf">>}}}}}]},
       <<"TextElement">> =>
        {struct,
         #{placeholder => {optional,{any_of,[binstr,{exact,null}]}},
           byte_range => {required,{all_of,[{ref,<<"ByteRange">>}]}}}},
       <<"GitDiffToRemoteResponse">> =>
        {struct,
         #{diff => {required,binstr},sha => {required,{ref,<<"GitSha">>}}}},
       <<"DynamicToolCallParams">> =>
        {struct,
         #{arguments => {required,term},
           callId => {required,binstr},
           threadId => {required,binstr},
           turnId => {required,binstr},
           tool => {required,binstr}}},
       <<"SubAgentSource">> =>
        {any_of,
         [{enum,[review,compact]},
          {struct,
           #{thread_spawn =>
              {required,
               {struct,
                #{depth => {required,integer},
                  parent_thread_id => {required,{ref,<<"ThreadId">>}}}}}}},
          {struct,#{other => {required,binstr}}}]},
       <<"JSONRPCError">> =>
        {struct,
         #{error => {required,{ref,<<"JSONRPCErrorError">>}},
           id => {required,{ref,<<"RequestId">>}}}},
       <<"UserInfoResponse">> =>
        {struct,
         #{allegedUserEmail => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ExecOutputStream">> => {enum,[stdout,stderr]},
       <<"AgentMessageContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,['Text']}},text => {required,binstr}}}]},
       <<"SessionConfiguredNotification">> =>
        {struct,
         #{model => {required,binstr},
           rolloutPath => {required,binstr},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           historyEntryCount => {required,integer},
           historyLogId => {required,integer},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
           sessionId => {required,{ref,<<"ThreadId">>}}}},
       <<"UserInput">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[text]}},
             text => {required,binstr},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement">>}}}}}}},
          {struct,
           #{type => {required,{enum,[image]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[local_image]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[skill]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[mention]}},
             path => {required,binstr}}}]},
       <<"RequestUserInputQuestionOption">> =>
        {struct,
         #{label => {required,binstr},description => {required,binstr}}},
       <<"JSONRPCMessage">> =>
        {any_of,
         [{ref,<<"JSONRPCRequest">>},
          {ref,<<"JSONRPCNotification">>},
          {ref,<<"JSONRPCResponse">>},
          {ref,<<"JSONRPCError">>}]},
       <<"GetConversationSummaryResponse">> =>
        {struct,#{summary => {required,{ref,<<"ConversationSummary">>}}}},
       <<"AbsolutePathBuf">> => binstr,
       <<"ReviewDecision">> =>
        {any_of,
         [{enum,[approved]},
          {struct,
           #{approved_execpolicy_amendment =>
              {required,
               {struct,
                #{proposed_execpolicy_amendment =>
                   {required,{list,binstr}}}}}}},
          {enum,[approved_for_session]},
          {enum,[denied]},
          {enum,[abort]}]},
       <<"FunctionCallOutputContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[input_text]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[input_image]}},
             image_url => {required,binstr}}}]},
       <<"PlanType">> =>
        {enum,[free,go,plus,pro,team,business,enterprise,edu,unknown]},
       <<"ResumeConversationParams">> =>
        {struct,
         #{path => {optional,{any_of,[binstr,{exact,null}]}},
           history =>
            {optional,{any_of,[{list,{ref,<<"ResponseItem">>}},{exact,null}]}},
           conversationId =>
            {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}},
           overrides =>
            {optional,
             {any_of,[{ref,<<"NewConversationParams">>},{exact,null}]}}}},
       <<"FuzzyFileSearchResult">> =>
        {struct,
         #{path => {required,binstr},
           root => {required,binstr},
           file_name => {required,binstr},
           indices => {optional,{any_of,[{list,integer},{exact,null}]}},
           score => {required,integer}}},
       <<"ServerRequest">> =>
        {any_of,
         [{struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params =>
              {required,{ref,<<"CommandExecutionRequestApprovalParams">>}},
             method =>
              {required,{enum,['item/commandExecution/requestApproval']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"FileChangeRequestApprovalParams">>}},
             method => {required,{enum,['item/fileChange/requestApproval']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ToolRequestUserInputParams">>}},
             method => {required,{enum,['item/tool/requestUserInput']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"DynamicToolCallParams">>}},
             method => {required,{enum,['item/tool/call']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ChatgptAuthTokensRefreshParams">>}},
             method =>
              {required,{enum,['account/chatgptAuthTokens/refresh']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ApplyPatchApprovalParams">>}},
             method => {required,{enum,[applyPatchApproval]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ExecCommandApprovalParams">>}},
             method => {required,{enum,[execCommandApproval]}}}}]},
       <<"SkillDependencies">> =>
        {struct,#{tools => {required,{list,{ref,<<"SkillToolDependency">>}}}}},
       <<"SkillInterface">> =>
        {struct,
         #{short_description => {optional,{any_of,[binstr,{exact,null}]}},
           brand_color => {optional,{any_of,[binstr,{exact,null}]}},
           default_prompt => {optional,{any_of,[binstr,{exact,null}]}},
           display_name => {optional,{any_of,[binstr,{exact,null}]}},
           icon_large => {optional,{any_of,[binstr,{exact,null}]}},
           icon_small => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"Resource">> =>
        {struct,
         #{name => {required,binstr},
           size => {optional,{any_of,[integer,{exact,null}]}},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           uri => {required,binstr},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ForkConversationResponse">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           rolloutPath => {required,binstr},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}}}},
       <<"ThreadId">> => binstr,
       <<"SandboxSettings">> =>
        {struct,
         #{networkAccess => {optional,{any_of,[boolean,{exact,null}]}},
           excludeSlashTmp => {optional,{any_of,[boolean,{exact,null}]}},
           excludeTmpdirEnvVar => {optional,{any_of,[boolean,{exact,null}]}},
           writableRoots =>
            {optional,{default,{[],{list,{ref,<<"AbsolutePathBuf">>}}}}}}},
       <<"v2">> => term,
       <<"SkillsListEntry">> =>
        {struct,
         #{errors => {required,{list,{ref,<<"SkillErrorInfo">>}}},
           cwd => {required,binstr},
           skills => {required,{list,{ref,<<"SkillMetadata">>}}}}},
       <<"ApplyPatchApprovalResponse">> =>
        {struct,#{decision => {required,{ref,<<"ReviewDecision">>}}}},
       <<"AddConversationSubscriptionResponse">> =>
        {struct,#{subscriptionId => {required,binstr}}},
       <<"RateLimitSnapshot">> =>
        {struct,
         #{primary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}},
           credits =>
            {optional,{any_of,[{ref,<<"CreditsSnapshot">>},{exact,null}]}},
           secondary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}},
           plan_type =>
            {optional,{any_of,[{ref,<<"PlanType">>},{exact,null}]}}}},
       <<"ClientRequest">> =>
        {any_of,
         [{struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"InitializeParams">>}},
             method => {required,{enum,[initialize]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadStartParams">>}},
             method => {required,{enum,['thread/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadResumeParams">>}},
             method => {required,{enum,['thread/resume']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadForkParams">>}},
             method => {required,{enum,['thread/fork']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadArchiveParams">>}},
             method => {required,{enum,['thread/archive']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadSetNameParams">>}},
             method => {required,{enum,['thread/name/set']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadUnarchiveParams">>}},
             method => {required,{enum,['thread/unarchive']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadCompactStartParams">>}},
             method => {required,{enum,['thread/compact/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadRollbackParams">>}},
             method => {required,{enum,['thread/rollback']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadListParams">>}},
             method => {required,{enum,['thread/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadLoadedListParams">>}},
             method => {required,{enum,['thread/loaded/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadReadParams">>}},
             method => {required,{enum,['thread/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsListParams">>}},
             method => {required,{enum,['skills/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsRemoteReadParams">>}},
             method => {required,{enum,['skills/remote/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsRemoteWriteParams">>}},
             method => {required,{enum,['skills/remote/write']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/AppsListParams">>}},
             method => {required,{enum,['app/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsConfigWriteParams">>}},
             method => {required,{enum,['skills/config/write']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/TurnStartParams">>}},
             method => {required,{enum,['turn/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/TurnInterruptParams">>}},
             method => {required,{enum,['turn/interrupt']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ReviewStartParams">>}},
             method => {required,{enum,['review/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ModelListParams">>}},
             method => {required,{enum,['model/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/McpServerOauthLoginParams">>}},
             method => {required,{enum,['mcpServer/oauth/login']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['config/mcpServer/reload']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ListMcpServerStatusParams">>}},
             method => {required,{enum,['mcpServerStatus/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/LoginAccountParams">>}},
             method => {required,{enum,['account/login/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/CancelLoginAccountParams">>}},
             method => {required,{enum,['account/login/cancel']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['account/logout']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['account/rateLimits/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/FeedbackUploadParams">>}},
             method => {required,{enum,['feedback/upload']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/CommandExecParams">>}},
             method => {required,{enum,['command/exec']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ConfigReadParams">>}},
             method => {required,{enum,['config/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ConfigValueWriteParams">>}},
             method => {required,{enum,['config/value/write']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ConfigBatchWriteParams">>}},
             method => {required,{enum,['config/batchWrite']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['configRequirements/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/GetAccountParams">>}},
             method => {required,{enum,['account/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"NewConversationParams">>}},
             method => {required,{enum,[newConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"GetConversationSummaryParams">>}},
             method => {required,{enum,[getConversationSummary]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ListConversationsParams">>}},
             method => {required,{enum,[listConversations]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ResumeConversationParams">>}},
             method => {required,{enum,[resumeConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ForkConversationParams">>}},
             method => {required,{enum,[forkConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ArchiveConversationParams">>}},
             method => {required,{enum,[archiveConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"SendUserMessageParams">>}},
             method => {required,{enum,[sendUserMessage]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"SendUserTurnParams">>}},
             method => {required,{enum,[sendUserTurn]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"InterruptConversationParams">>}},
             method => {required,{enum,[interruptConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"AddConversationListenerParams">>}},
             method => {required,{enum,[addConversationListener]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"RemoveConversationListenerParams">>}},
             method => {required,{enum,[removeConversationListener]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"GitDiffToRemoteParams">>}},
             method => {required,{enum,[gitDiffToRemote]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"LoginApiKeyParams">>}},
             method => {required,{enum,[loginApiKey]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[loginChatGpt]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"CancelLoginChatGptParams">>}},
             method => {required,{enum,[cancelLoginChatGpt]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[logoutChatGpt]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"GetAuthStatusParams">>}},
             method => {required,{enum,[getAuthStatus]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[getUserSavedConfig]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"SetDefaultModelParams">>}},
             method => {required,{enum,[setDefaultModel]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[getUserAgent]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[userInfo]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"FuzzyFileSearchParams">>}},
             method => {required,{enum,[fuzzyFileSearch]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ExecOneOffCommandParams">>}},
             method => {required,{enum,[execOneOffCommand]}}}}]},
       <<"ReviewTarget">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[uncommittedChanges]}}}},
          {struct,
           #{type => {required,{enum,[baseBranch]}},
             branch => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[commit]}},
             title => {optional,{any_of,[binstr,{exact,null}]}},
             sha => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[custom]}},
             instructions => {required,binstr}}}]},
       <<"GetAuthStatusResponse">> =>
        {struct,
         #{authMethod =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}},
           authToken => {optional,{any_of,[binstr,{exact,null}]}},
           requiresOpenaiAuth => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"ToolRequestUserInputOption">> =>
        {struct,
         #{label => {required,binstr},description => {required,binstr}}},
       <<"ForkConversationParams">> =>
        {struct,
         #{path => {optional,{any_of,[binstr,{exact,null}]}},
           conversationId =>
            {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}},
           overrides =>
            {optional,
             {any_of,[{ref,<<"NewConversationParams">>},{exact,null}]}}}},
       <<"ExecCommandApprovalResponse">> =>
        {struct,#{decision => {required,{ref,<<"ReviewDecision">>}}}},
       <<"FunctionCallOutputBody">> =>
        {any_of,[binstr,{list,{ref,<<"FunctionCallOutputContentItem">>}}]},
       <<"ClientInfo">> =>
        {struct,
         #{name => {required,binstr},
           version => {required,binstr},
           title => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"LoginApiKeyParams">> => {struct,#{apiKey => {required,binstr}}},
       <<"GitDiffToRemoteParams">> => {struct,#{cwd => {required,binstr}}},
       <<"RateLimitWindow">> =>
        {struct,
         #{resets_at => {optional,{any_of,[integer,{exact,null}]}},
           used_percent => {required,number},
           window_minutes => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"McpAuthStatus">> =>
        {enum,[unsupported,not_logged_in,bearer_token,o_auth]},
       <<"SkillMetadata">> =>
        {struct,
         #{enabled => {required,boolean},
           name => {required,binstr},
           scope => {required,{ref,<<"SkillScope">>}},
           path => {required,binstr},
           interface =>
            {optional,{any_of,[{ref,<<"SkillInterface">>},{exact,null}]}},
           description => {required,binstr},
           short_description => {optional,{any_of,[binstr,{exact,null}]}},
           dependencies =>
            {optional,{any_of,[{ref,<<"SkillDependencies">>},{exact,null}]}}}},
       <<"InputItem">> =>
        {any_of,
         [{struct,
           #{data =>
              {required,
               {struct,
                #{text => {required,binstr},
                  text_elements =>
                   {optional,
                    {default,{[],{list,{ref,<<"V1TextElement">>}}}}}}}},
             type => {required,{enum,[text]}}}},
          {struct,
           #{data => {required,{struct,#{image_url => {required,binstr}}}},
             type => {required,{enum,[image]}}}},
          {struct,
           #{data => {required,{struct,#{path => {required,binstr}}}},
             type => {required,{enum,[localImage]}}}}]},
       <<"CallToolResult">> =>
        {struct,
         #{content => {required,{list,term}},
           '_meta' => {optional,term},
           structuredContent => {optional,term},
           isError => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"LocalShellStatus">> => {enum,[completed,in_progress,incomplete]},
       <<"LoginChatGptResponse">> =>
        {struct,#{loginId => {required,binstr},authUrl => {required,binstr}}},
       <<"ConversationSummary">> =>
        {struct,
         #{timestamp => {optional,{any_of,[binstr,{exact,null}]}},
           path => {required,binstr},
           source => {required,{ref,<<"SessionSource">>}},
           cwd => {required,binstr},
           conversationId => {required,{ref,<<"ThreadId">>}},
           modelProvider => {required,binstr},
           cliVersion => {required,binstr},
           gitInfo =>
            {optional,{any_of,[{ref,<<"ConversationGitInfo">>},{exact,null}]}},
           preview => {required,binstr},
           updatedAt => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"DynamicToolCallResponse">> =>
        {struct,
         #{success => {required,boolean},
           contentItems =>
            {required,{list,{ref,<<"DynamicToolCallOutputContentItem">>}}}}},
       <<"SandboxMode">> =>
        {enum,['read-only','workspace-write','danger-full-access']},
       <<"FileChangeRequestApprovalResponse">> =>
        {struct,
         #{decision => {required,{ref,<<"FileChangeApprovalDecision">>}}}},
       <<"NewConversationParams">> =>
        {struct,
         #{profile => {optional,{any_of,[binstr,{exact,null}]}},
           config => {optional,{any_of,[{map,{binstr,term}},{exact,null}]}},
           cwd => {optional,{any_of,[binstr,{exact,null}]}},
           model => {optional,{any_of,[binstr,{exact,null}]}},
           approvalPolicy =>
            {optional,{any_of,[{ref,<<"AskForApproval">>},{exact,null}]}},
           baseInstructions => {optional,{any_of,[binstr,{exact,null}]}},
           compactPrompt => {optional,{any_of,[binstr,{exact,null}]}},
           developerInstructions => {optional,{any_of,[binstr,{exact,null}]}},
           includeApplyPatchTool => {optional,{any_of,[boolean,{exact,null}]}},
           modelProvider => {optional,{any_of,[binstr,{exact,null}]}},
           sandbox =>
            {optional,{any_of,[{ref,<<"SandboxMode">>},{exact,null}]}}}},
       <<"InterruptConversationParams">> =>
        {struct,#{conversationId => {required,{ref,<<"ThreadId">>}}}},
       <<"GhostCommit">> =>
        {struct,
         #{id => {required,binstr},
           parent => {optional,{any_of,[binstr,{exact,null}]}},
           preexisting_untracked_dirs => {required,{list,binstr}},
           preexisting_untracked_files => {required,{list,binstr}}}},
       <<"CommandExecutionRequestApprovalResponse">> =>
        {struct,
         #{decision =>
            {required,{ref,<<"CommandExecutionApprovalDecision">>}}}},
       <<"V1ByteRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"CommandExecutionRequestApprovalParams">> =>
        {struct,
         #{command => {optional,{any_of,[binstr,{exact,null}]}},
           reason => {optional,{any_of,[binstr,{exact,null}]}},
           cwd => {optional,{any_of,[binstr,{exact,null}]}},
           threadId => {required,binstr},
           turnId => {required,binstr},
           commandActions =>
            {optional,
             {any_of,[{list,{ref,<<"v2/CommandAction">>}},{exact,null}]}},
           itemId => {required,binstr},
           proposedExecpolicyAmendment =>
            {optional,{any_of,[{list,binstr},{exact,null}]}}}},
       <<"InitializeResponse">> => {struct,#{userAgent => {required,binstr}}},
       <<"ModeKind">> => {enum,[plan,default]},
       <<"AuthMode">> =>
        {any_of,[{enum,[apikey]},{enum,[chatgpt]},{enum,[chatgptAuthTokens]}]},
       <<"ReasoningItemReasoningSummary">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[summary_text]}},
             text => {required,binstr}}}]},
       <<"SendUserMessageParams">> =>
        {struct,
         #{items => {required,{list,{ref,<<"InputItem">>}}},
           conversationId => {required,{ref,<<"ThreadId">>}}}},
       <<"ToolRequestUserInputQuestion">> =>
        {struct,
         #{id => {required,binstr},
           header => {required,binstr},
           options =>
            {optional,
             {any_of,
              [{list,{ref,<<"ToolRequestUserInputOption">>}},{exact,null}]}},
           question => {required,binstr},
           isOther => {optional,{default,{false,boolean}}},
           isSecret => {optional,{default,{false,boolean}}}}},
       <<"RemoveConversationSubscriptionResponse">> => {map,{binstr,term}},
       <<"GetConversationSummaryParams">> =>
        {any_of,
         [{struct,#{rolloutPath => {required,binstr}}},
          {struct,#{conversationId => {required,{ref,<<"ThreadId">>}}}}]},
       <<"ForcedLoginMethod">> => {enum,[chatgpt,api]},
       <<"SetDefaultModelParams">> =>
        {struct,
         #{model => {optional,{any_of,[binstr,{exact,null}]}},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}}}},
       <<"ReasoningItemContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[reasoning_text]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[text]}},text => {required,binstr}}}]},
       <<"LoginChatGptCompleteNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           success => {required,boolean},
           loginId => {required,binstr}}},
       <<"Result_of_CallToolResult_or_String">> =>
        {any_of,
         [{struct,#{'Ok' => {required,{ref,<<"CallToolResult">>}}}},
          {struct,#{'Err' => {required,binstr}}}]},
       <<"Tool">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           outputSchema => {optional,term},
           inputSchema => {required,term},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}}}},
       <<"ResourceTemplate">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           annotations => {optional,term},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}},
           uriTemplate => {required,binstr}}},
       <<"AuthStatusChangeNotification">> =>
        {struct,
         #{authMethod =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}}}},
       <<"SendUserTurnResponse">> => {map,{binstr,term}},
       <<"GetUserAgentResponse">> =>
        {struct,#{userAgent => {required,binstr}}},
       <<"TurnItem">> =>
        {any_of,
         [{struct,
           #{id => {required,binstr},
             type => {required,{enum,['UserMessage']}},
             content => {required,{list,{ref,<<"UserInput">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['AgentMessage']}},
             content => {required,{list,{ref,<<"AgentMessageContent">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['Plan']}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['Reasoning']}},
             summary_text => {required,{list,binstr}},
             raw_content => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['WebSearch']}},
             query => {required,binstr},
             action => {required,{ref,<<"WebSearchAction">>}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['ContextCompaction']}}}}]},
       <<"FuzzyFileSearchParams">> =>
        {struct,
         #{query => {required,binstr},
           roots => {required,{list,binstr}},
           cancellationToken => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ResumeConversationResponse">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           rolloutPath => {required,binstr},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}}}},
       <<"PlanItemArg">> =>
        {struct,
         #{status => {required,{ref,<<"StepStatus">>}},
           step => {required,binstr}}},
       <<"HistoryEntry">> =>
        {struct,
         #{text => {required,binstr},
           conversation_id => {required,binstr},
           ts => {required,integer}}},
       <<"ExecCommandSource">> =>
        {enum,
         [agent,user_shell,unified_exec_startup,unified_exec_interaction]},
       <<"Tools">> =>
        {struct,
         #{webSearch => {optional,{any_of,[boolean,{exact,null}]}},
           viewImage => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"ListConversationsResponse">> =>
        {struct,
         #{items => {required,{list,{ref,<<"ConversationSummary">>}}},
           nextCursor => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"FileChangeApprovalDecision">> =>
        {any_of,
         [{enum,[accept]},
          {enum,[acceptForSession]},
          {enum,[decline]},
          {enum,[cancel]}]},
       <<"RequestUserInputQuestion">> =>
        {struct,
         #{id => {required,binstr},
           header => {required,binstr},
           options =>
            {optional,
             {any_of,
              [{list,{ref,<<"RequestUserInputQuestionOption">>}},
               {exact,null}]}},
           question => {required,binstr},
           isOther => {optional,{default,{false,boolean}}},
           isSecret => {optional,{default,{false,boolean}}}}},
       <<"ChatgptAuthTokensRefreshParams">> =>
        {struct,
         #{reason => {required,{ref,<<"ChatgptAuthTokensRefreshReason">>}},
           previousAccountId => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ExecOneOffCommandResponse">> =>
        {struct,
         #{stdout => {required,binstr},
           stderr => {required,binstr},
           exitCode => {required,integer}}},
       <<"TurnAbortReason">> => {enum,[interrupted,replaced,review_ended]},
       <<"GitSha">> => binstr,
       <<"WebSearchAction">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[search]}},
             query => {optional,{any_of,[binstr,{exact,null}]}},
             queries => {optional,{any_of,[{list,binstr},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[open_page]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[find_in_page]}},
             pattern => {optional,{any_of,[binstr,{exact,null}]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{type => {required,{enum,[other]}}}}]},
       <<"ChatgptAuthTokensRefreshReason">> =>
        {any_of,[{enum,[unauthorized]}]},
       <<"CreditsSnapshot">> =>
        {struct,
         #{unlimited => {required,boolean},
           balance => {optional,{any_of,[binstr,{exact,null}]}},
           has_credits => {required,boolean}}},
       <<"StepStatus">> => {enum,[pending,in_progress,completed]},
       <<"ChatgptAuthTokensRefreshResponse">> =>
        {struct,
         #{accessToken => {required,binstr},idToken => {required,binstr}}},
       <<"DynamicToolCallOutputContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[inputText]}},text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[inputImage]}},
             imageUrl => {required,binstr}}}]},
       <<"SkillErrorInfo">> =>
        {struct,#{message => {required,binstr},path => {required,binstr}}},
       <<"TokenUsageInfo">> =>
        {struct,
         #{model_context_window => {optional,{any_of,[integer,{exact,null}]}},
           last_token_usage => {required,{ref,<<"TokenUsage">>}},
           total_token_usage => {required,{ref,<<"TokenUsage">>}}}},
       <<"FileChange">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[add]}},content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[delete]}},content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[update]}},
             move_path => {optional,{any_of,[binstr,{exact,null}]}},
             unified_diff => {required,binstr}}}]},
       <<"FuzzyFileSearchResponse">> =>
        {struct,
         #{files => {required,{list,{ref,<<"FuzzyFileSearchResult">>}}}}},
       <<"CustomPrompt">> =>
        {struct,
         #{name => {required,binstr},
           path => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           content => {required,binstr},
           argument_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ByteRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"ExecCommandApprovalParams">> =>
        {struct,
         #{command => {required,{list,binstr}},
           reason => {optional,{any_of,[binstr,{exact,null}]}},
           cwd => {required,binstr},
           callId => {required,binstr},
           conversationId => {required,{ref,<<"v2/ThreadId">>}},
           parsedCmd => {required,{list,{ref,<<"ParsedCommand">>}}}}},
       <<"CodexErrorInfo">> =>
        {any_of,
         [{enum,
           [context_window_exceeded,usage_limit_exceeded,
            internal_server_error,unauthorized,bad_request,sandbox_error,
            thread_rollback_failed,other]},
          {struct,
           #{model_cap =>
              {required,
               {struct,
                #{model => {required,binstr},
                  reset_after_seconds =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{http_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_disconnected =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_too_many_failed_attempts =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}}]},
       <<"LogoutChatGptResponse">> => {map,{binstr,term}},
       <<"CancelLoginChatGptParams">> =>
        {struct,#{loginId => {required,binstr}}},
       <<"RemoveConversationListenerParams">> =>
        {struct,#{subscriptionId => {required,binstr}}},
       <<"ExecOneOffCommandParams">> =>
        {struct,
         #{command => {required,{list,binstr}},
           cwd => {optional,{any_of,[binstr,{exact,null}]}},
           sandboxPolicy =>
            {optional,{any_of,[{ref,<<"SandboxPolicy">>},{exact,null}]}},
           timeoutMs => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"NetworkAccess">> => {enum,[restricted,enabled]},
       <<"SkillScope">> => {enum,[user,repo,system,admin]},
       <<"InitializeParams">> =>
        {struct,
         #{capabilities =>
            {optional,
             {any_of,[{ref,<<"InitializeCapabilities">>},{exact,null}]}},
           clientInfo => {required,{ref,<<"ClientInfo">>}}}},
       <<"FileChangeRequestApprovalParams">> =>
        {struct,
         #{reason => {optional,{any_of,[binstr,{exact,null}]}},
           grantRoot => {optional,{any_of,[binstr,{exact,null}]}},
           threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr}}},
       <<"ContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[input_text]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[input_image]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[output_text]}},
             text => {required,binstr}}}]},
       <<"Verbosity">> => {enum,[low,medium,high]},
       <<"InterruptConversationResponse">> =>
        {struct,#{abortReason => {required,{ref,<<"TurnAbortReason">>}}}},
       <<"RequestId">> => {any_of,[binstr,integer]},
       <<"ToolRequestUserInputResponse">> =>
        {struct,
         #{answers =>
            {required,{map,{binstr,{ref,<<"ToolRequestUserInputAnswer">>}}}}}},
       <<"SkillToolDependency">> =>
        {struct,
         #{command => {optional,{any_of,[binstr,{exact,null}]}},
           type => {required,binstr},
           value => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           url => {optional,{any_of,[binstr,{exact,null}]}},
           transport => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ArchiveConversationResponse">> => {map,{binstr,term}},
       <<"Profile">> =>
        {struct,
         #{model => {optional,{any_of,[binstr,{exact,null}]}},
           approvalPolicy =>
            {optional,{any_of,[{ref,<<"AskForApproval">>},{exact,null}]}},
           modelProvider => {optional,{any_of,[binstr,{exact,null}]}},
           modelReasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           modelReasoningSummary =>
            {optional,{any_of,[{ref,<<"ReasoningSummary">>},{exact,null}]}},
           modelVerbosity =>
            {optional,{any_of,[{ref,<<"Verbosity">>},{exact,null}]}},
           chatgptBaseUrl => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"SessionSource">> =>
        {any_of,
         [{enum,[cli,vscode,exec,mcp,unknown]},
          {struct,#{subagent => {required,{ref,<<"SubAgentSource">>}}}}]},
       <<"NewConversationResponse">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           rolloutPath => {required,binstr},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}}}},
       <<"CommandExecutionApprovalDecision">> =>
        {any_of,
         [{enum,[accept]},
          {enum,[acceptForSession]},
          {struct,
           #{acceptWithExecpolicyAmendment =>
              {required,
               {struct,#{execpolicy_amendment => {required,{list,binstr}}}}}}},
          {enum,[decline]},
          {enum,[cancel]}]},
       <<"EventMsg">> =>
        {any_of,
         [{struct,
           #{message => {required,binstr},
             type => {required,{enum,[error]}},
             codex_error_info =>
              {optional,
               {default,
                {null,
                 {any_of,[{ref,<<"v2/CodexErrorInfo">>},{exact,null}]}}}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[warning]}}}},
          {struct,#{type => {required,{enum,[context_compacted]}}}},
          {struct,
           #{type => {required,{enum,[thread_rolled_back]}},
             num_turns => {required,integer}}},
          {struct,
           #{type => {required,{enum,[task_started]}},
             model_context_window =>
              {optional,{any_of,[integer,{exact,null}]}},
             collaboration_mode_kind =>
              {optional,
               {default,{<<"default">>,{all_of,[{ref,<<"v2/ModeKind">>}]}}}}}},
          {struct,
           #{type => {required,{enum,[task_complete]}},
             last_agent_message => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{info =>
              {optional,{any_of,[{ref,<<"TokenUsageInfo">>},{exact,null}]}},
             type => {required,{enum,[token_count]}},
             rate_limits =>
              {optional,
               {any_of,[{ref,<<"v2/RateLimitSnapshot">>},{exact,null}]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[agent_message]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[user_message]}},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"v2/TextElement">>}}}}},
             images => {optional,{any_of,[{list,binstr},{exact,null}]}},
             local_images => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{type => {required,{enum,[agent_message_delta]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_delta]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_raw_content]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_raw_content_delta]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_section_break]}},
             item_id => {optional,{default,{<<>>,binstr}}},
             summary_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[session_configured]}},
             cwd => {required,binstr},
             model => {required,binstr},
             reasoning_effort =>
              {optional,
               {any_of,[{ref,<<"v2/ReasoningEffort">>},{exact,null}]}},
             approval_policy =>
              {required,{all_of,[{ref,<<"v2/AskForApproval">>}]}},
             forked_from_id =>
              {optional,{any_of,[{ref,<<"v2/ThreadId">>},{exact,null}]}},
             history_entry_count => {required,integer},
             history_log_id => {required,integer},
             initial_messages =>
              {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
             model_provider_id => {required,binstr},
             rollout_path => {optional,{any_of,[binstr,{exact,null}]}},
             sandbox_policy =>
              {required,{all_of,[{ref,<<"v2/SandboxPolicy">>}]}},
             session_id => {required,{ref,<<"v2/ThreadId">>}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[thread_name_updated]}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}},
             thread_id => {required,{ref,<<"v2/ThreadId">>}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"McpStartupStatus">>}]}},
             type => {required,{enum,[mcp_startup_update]}},
             server => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[mcp_startup_complete]}},
             cancelled => {required,{list,binstr}},
             failed => {required,{list,{ref,<<"McpStartupFailure">>}}},
             ready => {required,{list,binstr}}}},
          {struct,
           #{type => {required,{enum,[mcp_tool_call_begin]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}}}},
          {struct,
           #{type => {required,{enum,[mcp_tool_call_end]}},
             result =>
              {required,
               {all_of,[{ref,<<"Result_of_CallToolResult_or_String">>}]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}},
             duration => {required,{ref,<<"Duration">>}}}},
          {struct,
           #{type => {required,{enum,[web_search_begin]}},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[web_search_end]}},
             query => {required,binstr},
             action => {required,{ref,<<"v2/WebSearchAction">>}},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[exec_command_begin]}},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr}}},
          {struct,
           #{stream => {required,{all_of,[{ref,<<"ExecOutputStream">>}]}},
             type => {required,{enum,[exec_command_output_delta]}},
             chunk => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[terminal_interaction]}},
             stdin => {required,binstr},
             call_id => {required,binstr},
             process_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[exec_command_end]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             duration => {required,{all_of,[{ref,<<"Duration">>}]}},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr},
             aggregated_output => {optional,{default,{<<>>,binstr}}},
             exit_code => {required,integer},
             formatted_output => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[view_image_tool_call]}},
             path => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[exec_approval_request]}},
             cwd => {required,binstr},
             proposed_execpolicy_amendment =>
              {optional,{any_of,[{list,binstr},{exact,null}]}},
             call_id => {required,binstr},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[request_user_input]}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             questions =>
              {required,{list,{ref,<<"RequestUserInputQuestion">>}}}}},
          {struct,
           #{type => {required,{enum,[dynamic_tool_call_request]}},
             arguments => {required,term},
             callId => {required,binstr},
             turnId => {required,binstr},
             tool => {required,binstr}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             message => {required,binstr},
             type => {required,{enum,[elicitation_request]}},
             server_name => {required,binstr}}},
          {struct,
           #{reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[apply_patch_approval_request]}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             grant_root => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[deprecation_notice]}},
             summary => {required,binstr},
             details => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[background_event]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[undo_started]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[undo_completed]}},
             success => {required,boolean}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[stream_error]}},
             codex_error_info =>
              {optional,
               {default,
                {null,{any_of,[{ref,<<"v2/CodexErrorInfo">>},{exact,null}]}}}},
             additional_details =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}}}},
          {struct,
           #{type => {required,{enum,[patch_apply_begin]}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             auto_approved => {required,boolean}}},
          {struct,
           #{type => {required,{enum,[patch_apply_end]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             success => {required,boolean},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             changes =>
              {optional,
               {default,{#{},{map,{binstr,{ref,<<"FileChange">>}}}}}}}},
          {struct,
           #{type => {required,{enum,[turn_diff]}},
             unified_diff => {required,binstr}}},
          {struct,
           #{offset => {required,integer},
             type => {required,{enum,[get_history_entry_response]}},
             entry =>
              {optional,{any_of,[{ref,<<"HistoryEntry">>},{exact,null}]}},
             log_id => {required,integer}}},
          {struct,
           #{type => {required,{enum,[mcp_list_tools_response]}},
             tools => {required,{map,{binstr,{ref,<<"v2/Tool">>}}}},
             resources =>
              {required,{map,{binstr,{list,{ref,<<"v2/Resource">>}}}}},
             auth_statuses =>
              {required,{map,{binstr,{ref,<<"v2/McpAuthStatus">>}}}},
             resource_templates =>
              {required,
               {map,{binstr,{list,{ref,<<"v2/ResourceTemplate">>}}}}}}},
          {struct,
           #{type => {required,{enum,[list_custom_prompts_response]}},
             custom_prompts => {required,{list,{ref,<<"CustomPrompt">>}}}}},
          {struct,
           #{type => {required,{enum,[list_skills_response]}},
             skills => {required,{list,{ref,<<"v2/SkillsListEntry">>}}}}},
          {struct,
           #{type => {required,{enum,[list_remote_skills_response]}},
             skills => {required,{list,{ref,<<"v2/RemoteSkillSummary">>}}}}},
          {struct,
           #{id => {required,binstr},
             name => {required,binstr},
             type => {required,{enum,[remote_skill_downloaded]}},
             path => {required,binstr}}},
          {struct,#{type => {required,{enum,[skills_update_available]}}}},
          {struct,
           #{type => {required,{enum,[plan_update]}},
             plan => {required,{list,{ref,<<"PlanItemArg">>}}},
             explanation =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}}}},
          {struct,
           #{reason => {required,{ref,<<"TurnAbortReason">>}},
             type => {required,{enum,[turn_aborted]}}}},
          {struct,#{type => {required,{enum,[shutdown_complete]}}}},
          {struct,
           #{type => {required,{enum,[entered_review_mode]}},
             target => {required,{ref,<<"v2/ReviewTarget">>}},
             user_facing_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[exited_review_mode]}},
             review_output =>
              {optional,
               {any_of,[{ref,<<"ReviewOutputEvent">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[raw_response_item]}},
             item => {required,{ref,<<"v2/ResponseItem">>}}}},
          {struct,
           #{type => {required,{enum,[item_started]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"v2/ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[item_completed]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"v2/ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_message_content_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[plan_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[reasoning_content_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             summary_index => {optional,{default,{0,integer}}},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[reasoning_raw_content_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr},
             content_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[collab_agent_spawn_begin]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[collab_agent_spawn_end]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             new_thread_id =>
              {optional,{any_of,[{ref,<<"v2/ThreadId">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[collab_agent_interaction_begin]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[collab_agent_interaction_end]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{type => {required,{enum,[collab_waiting_begin]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_ids =>
              {required,{list,{ref,<<"v2/ThreadId">>}}}}},
          {struct,
           #{type => {required,{enum,[collab_waiting_end]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             statuses => {required,{map,{binstr,{ref,<<"AgentStatus">>}}}}}},
          {struct,
           #{type => {required,{enum,[collab_close_begin]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[collab_close_end]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}}]},
       <<"GetAuthStatusParams">> =>
        {struct,
         #{refreshToken => {optional,{any_of,[boolean,{exact,null}]}},
           includeToken => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"AgentStatus">> =>
        {any_of,
         [{enum,[pending_init]},
          {enum,[running]},
          {struct,#{completed => {required,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{errored => {required,binstr}}},
          {enum,[shutdown]},
          {enum,[not_found]}]},
       <<"JSONRPCErrorError">> =>
        {struct,
         #{code => {required,integer},
           data => {optional,term},
           message => {required,binstr}}},
       <<"ToolRequestUserInputAnswer">> =>
        {struct,#{answers => {required,{list,binstr}}}},
       <<"ReviewCodeLocation">> =>
        {struct,
         #{absolute_file_path => {required,binstr},
           line_range => {required,{ref,<<"ReviewLineRange">>}}}},
       <<"SetDefaultModelResponse">> => {map,{binstr,term}},
       <<"JSONRPCRequest">> =>
        {struct,
         #{id => {required,{ref,<<"RequestId">>}},
           params => {optional,term},
           method => {required,binstr}}},
       <<"TokenUsage">> =>
        {struct,
         #{cached_input_tokens => {required,integer},
           input_tokens => {required,integer},
           output_tokens => {required,integer},
           reasoning_output_tokens => {required,integer},
           total_tokens => {required,integer}}},
       <<"InitializeCapabilities">> =>
        {struct,#{experimentalApi => {optional,{default,{false,boolean}}}}},
       <<"McpStartupFailure">> =>
        {struct,#{error => {required,binstr},server => {required,binstr}}},
       <<"ReasoningSummary">> =>
        {any_of,[{enum,[auto,concise,detailed]},{enum,[none]}]},
       <<"ReviewOutputEvent">> =>
        {struct,
         #{findings => {required,{list,{ref,<<"ReviewFinding">>}}},
           overall_confidence_score => {required,number},
           overall_correctness => {required,binstr},
           overall_explanation => {required,binstr}}},
       <<"V1TextElement">> =>
        {struct,
         #{byteRange => {required,{all_of,[{ref,<<"V1ByteRange">>}]}},
           placeholder => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ReviewLineRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"ToolRequestUserInputParams">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr},
           questions =>
            {required,{list,{ref,<<"ToolRequestUserInputQuestion">>}}}}},
       <<"ReviewFinding">> =>
        {struct,
         #{priority => {required,integer},
           title => {required,binstr},
           body => {required,binstr},
           code_location => {required,{ref,<<"ReviewCodeLocation">>}},
           confidence_score => {required,number}}},
       <<"CancelLoginChatGptResponse">> => {map,{binstr,term}},
       <<"SendUserTurnParams">> =>
        {struct,
         #{items => {required,{list,{ref,<<"InputItem">>}}},
           cwd => {required,binstr},
           conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           summary => {required,{ref,<<"ReasoningSummary">>}},
           sandboxPolicy => {required,{ref,<<"SandboxPolicy">>}},
           approvalPolicy => {required,{ref,<<"AskForApproval">>}},
           effort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           outputSchema => {optional,term}}},
       <<"ApplyPatchApprovalParams">> =>
        {struct,
         #{reason => {optional,{any_of,[binstr,{exact,null}]}},
           callId => {required,binstr},
           conversationId => {required,{ref,<<"v2/ThreadId">>}},
           fileChanges => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
           grantRoot => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"LoginApiKeyResponse">> => {map,{binstr,term}},
       <<"LocalShellAction">> =>
        {any_of,
         [{struct,
           #{command => {required,{list,binstr}},
             env => {optional,{any_of,[{map,{binstr,term}},{exact,null}]}},
             type => {required,{enum,[exec]}},
             user => {optional,{any_of,[binstr,{exact,null}]}},
             timeout_ms => {optional,{any_of,[integer,{exact,null}]}},
             working_directory =>
              {optional,{any_of,[binstr,{exact,null}]}}}}]}},
     {map,{binstr,term}}}},
  from_json =>
   {with_defs,
    {#{<<"SendUserMessageResponse">> => {map,{binstr,term}},
       <<"JSONRPCResponse">> =>
        {struct,
         #{id => {required,{ref,<<"RequestId">>}},result => {required,term}}},
       <<"ConversationGitInfo">> =>
        {struct,
         #{branch => {optional,{any_of,[binstr,{exact,null}]}},
           sha => {optional,{any_of,[binstr,{exact,null}]}},
           origin_url => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"McpStartupStatus">> =>
        {any_of,
         [{struct,#{state => {required,{enum,[starting]}}}},
          {struct,#{state => {required,{enum,[ready]}}}},
          {struct,
           #{error => {required,binstr},state => {required,{enum,[failed]}}}},
          {struct,#{state => {required,{enum,[cancelled]}}}}]},
       <<"GetUserSavedConfigResponse">> =>
        {struct,#{config => {required,{ref,<<"UserSavedConfig">>}}}},
       <<"Duration">> =>
        {struct,#{nanos => {required,integer},secs => {required,integer}}},
       <<"ListConversationsParams">> =>
        {struct,
         #{cursor => {optional,{any_of,[binstr,{exact,null}]}},
           modelProviders => {optional,{any_of,[{list,binstr},{exact,null}]}},
           pageSize => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"ArchiveConversationParams">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           rolloutPath => {required,binstr}}},
       <<"AskForApproval">> =>
        {any_of,
         [{enum,[untrusted]},
          {enum,['on-failure']},
          {enum,['on-request']},
          {enum,[never]}]},
       <<"McpInvocation">> =>
        {struct,
         #{arguments => {optional,term},
           server => {required,binstr},
           tool => {required,binstr}}},
       <<"ServerNotification">> =>
        {any_of,
         [{struct,
           #{params => {required,{ref,<<"v2/ErrorNotification">>}},
             method => {required,{enum,[error]}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ThreadStartedNotification">>}},
             method => {required,{enum,['thread/started']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ThreadNameUpdatedNotification">>}},
             method => {required,{enum,['thread/name/updated']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ThreadTokenUsageUpdatedNotification">>}},
             method => {required,{enum,['thread/tokenUsage/updated']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnStartedNotification">>}},
             method => {required,{enum,['turn/started']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnCompletedNotification">>}},
             method => {required,{enum,['turn/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnDiffUpdatedNotification">>}},
             method => {required,{enum,['turn/diff/updated']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/TurnPlanUpdatedNotification">>}},
             method => {required,{enum,['turn/plan/updated']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ItemStartedNotification">>}},
             method => {required,{enum,['item/started']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ItemCompletedNotification">>}},
             method => {required,{enum,['item/completed']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/RawResponseItemCompletedNotification">>}},
             method => {required,{enum,['rawResponseItem/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/AgentMessageDeltaNotification">>}},
             method => {required,{enum,['item/agentMessage/delta']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/PlanDeltaNotification">>}},
             method => {required,{enum,['item/plan/delta']}}}},
          {struct,
           #{params =>
              {required,
               {ref,<<"v2/CommandExecutionOutputDeltaNotification">>}},
             method =>
              {required,{enum,['item/commandExecution/outputDelta']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/TerminalInteractionNotification">>}},
             method =>
              {required,
               {enum,['item/commandExecution/terminalInteraction']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/FileChangeOutputDeltaNotification">>}},
             method => {required,{enum,['item/fileChange/outputDelta']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/McpToolCallProgressNotification">>}},
             method => {required,{enum,['item/mcpToolCall/progress']}}}},
          {struct,
           #{params =>
              {required,
               {ref,<<"v2/McpServerOauthLoginCompletedNotification">>}},
             method => {required,{enum,['mcpServer/oauthLogin/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/AccountUpdatedNotification">>}},
             method => {required,{enum,['account/updated']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/AccountRateLimitsUpdatedNotification">>}},
             method => {required,{enum,['account/rateLimits/updated']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ReasoningSummaryTextDeltaNotification">>}},
             method => {required,{enum,['item/reasoning/summaryTextDelta']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ReasoningSummaryPartAddedNotification">>}},
             method => {required,{enum,['item/reasoning/summaryPartAdded']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/ReasoningTextDeltaNotification">>}},
             method => {required,{enum,['item/reasoning/textDelta']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ContextCompactedNotification">>}},
             method => {required,{enum,['thread/compacted']}}}},
          {struct,
           #{params => {required,{ref,<<"v2/DeprecationNoticeNotification">>}},
             method => {required,{enum,[deprecationNotice]}}}},
          {struct,
           #{params => {required,{ref,<<"v2/ConfigWarningNotification">>}},
             method => {required,{enum,[configWarning]}}}},
          {struct,
           #{params =>
              {required,
               {ref,<<"v2/WindowsWorldWritableWarningNotification">>}},
             method => {required,{enum,['windows/worldWritableWarning']}}}},
          {struct,
           #{params =>
              {required,{ref,<<"v2/AccountLoginCompletedNotification">>}},
             method => {required,{enum,['account/login/completed']}}}},
          {struct,
           #{params => {required,{ref,<<"AuthStatusChangeNotification">>}},
             method => {required,{enum,[authStatusChange]}}}},
          {struct,
           #{params => {required,{ref,<<"LoginChatGptCompleteNotification">>}},
             method => {required,{enum,[loginChatGptComplete]}}}},
          {struct,
           #{params => {required,{ref,<<"SessionConfiguredNotification">>}},
             method => {required,{enum,[sessionConfigured]}}}}]},
       <<"ReasoningEffort">> => {enum,[none,minimal,low,medium,high,xhigh]},
       <<"ResponseItem">> =>
        {any_of,
         [{struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[message]}},
             phase =>
              {optional,{any_of,[{ref,<<"MessagePhase">>},{exact,null}]}},
             content => {required,{list,{ref,<<"ContentItem">>}}},
             end_turn => {optional,{any_of,[boolean,{exact,null}]}},
             role => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,[reasoning]}},
             content =>
              {optional,
               {default,
                {null,
                 {any_of,
                  [{list,{ref,<<"ReasoningItemContent">>}},{exact,null}]}}}},
             summary =>
              {required,{list,{ref,<<"ReasoningItemReasoningSummary">>}}},
             encrypted_content => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {required,{ref,<<"LocalShellStatus">>}},
             type => {required,{enum,[local_shell_call]}},
             action => {required,{ref,<<"LocalShellAction">>}},
             call_id => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             name => {required,binstr},
             type => {required,{enum,[function_call]}},
             arguments => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,{ref,<<"FunctionCallOutputPayload">>}},
             type => {required,{enum,[function_call_output]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             input => {required,binstr},
             name => {required,binstr},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[custom_tool_call]}},
             call_id => {required,binstr}}},
          {struct,
           #{output => {required,binstr},
             type => {required,{enum,[custom_tool_call_output]}},
             call_id => {required,binstr}}},
          {struct,
           #{id => {optional,{any_of,[binstr,{exact,null}]}},
             status => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[web_search_call]}},
             action =>
              {optional,{any_of,[{ref,<<"WebSearchAction">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[ghost_snapshot]}},
             ghost_commit => {required,{ref,<<"GhostCommit">>}}}},
          {struct,
           #{type => {required,{enum,[compaction]}},
             encrypted_content => {required,binstr}}},
          {struct,#{type => {required,{enum,[other]}}}}]},
       <<"AddConversationListenerParams">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           experimentalRawEvents => {optional,{default,{false,boolean}}}}},
       <<"ClientNotification">> =>
        {any_of,[{struct,#{method => {required,{enum,[initialized]}}}}]},
       <<"MessagePhase">> => {enum,[commentary,final_answer]},
       <<"RemoteSkillSummary">> =>
        {struct,
         #{id => {required,binstr},
           name => {required,binstr},
           description => {required,binstr}}},
       <<"ParsedCommand">> =>
        {any_of,
         [{struct,
           #{name => {required,binstr},
             type => {required,{enum,[read]}},
             path => {required,binstr},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[list_files]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[search]}},
             path => {optional,{any_of,[binstr,{exact,null}]}},
             cmd => {required,binstr},
             query => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[unknown]}},cmd => {required,binstr}}}]},
       <<"FunctionCallOutputPayload">> =>
        {struct,
         #{success => {optional,{any_of,[boolean,{exact,null}]}},
           body => {required,{ref,<<"FunctionCallOutputBody">>}}}},
       <<"JSONRPCNotification">> =>
        {struct,#{params => {optional,term},method => {required,binstr}}},
       <<"UserSavedConfig">> =>
        {struct,
         #{profile => {optional,{any_of,[binstr,{exact,null}]}},
           tools => {optional,{any_of,[{ref,<<"Tools">>},{exact,null}]}},
           model => {optional,{any_of,[binstr,{exact,null}]}},
           approvalPolicy =>
            {optional,{any_of,[{ref,<<"AskForApproval">>},{exact,null}]}},
           modelReasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           modelReasoningSummary =>
            {optional,{any_of,[{ref,<<"ReasoningSummary">>},{exact,null}]}},
           modelVerbosity =>
            {optional,{any_of,[{ref,<<"Verbosity">>},{exact,null}]}},
           forcedChatgptWorkspaceId =>
            {optional,{any_of,[binstr,{exact,null}]}},
           forcedLoginMethod =>
            {optional,{any_of,[{ref,<<"ForcedLoginMethod">>},{exact,null}]}},
           profiles => {required,{map,{binstr,{ref,<<"Profile">>}}}},
           sandboxMode =>
            {optional,{any_of,[{ref,<<"SandboxMode">>},{exact,null}]}},
           sandboxSettings =>
            {optional,{any_of,[{ref,<<"SandboxSettings">>},{exact,null}]}}}},
       <<"SandboxPolicy">> =>
        {any_of,
         [{struct,#{type => {required,{enum,['danger-full-access']}}}},
          {struct,#{type => {required,{enum,['read-only']}}}},
          {struct,
           #{type => {required,{enum,['external-sandbox']}},
             network_access =>
              {optional,
               {default,
                {<<"restricted">>,{all_of,[{ref,<<"NetworkAccess">>}]}}}}}},
          {struct,
           #{type => {required,{enum,['workspace-write']}},
             network_access => {optional,{default,{false,boolean}}},
             exclude_slash_tmp => {optional,{default,{false,boolean}}},
             exclude_tmpdir_env_var => {optional,{default,{false,boolean}}},
             writable_roots =>
              {optional,{list,{ref,<<"AbsolutePathBuf">>}}}}}]},
       <<"TextElement">> =>
        {struct,
         #{placeholder => {optional,{any_of,[binstr,{exact,null}]}},
           byte_range => {required,{all_of,[{ref,<<"ByteRange">>}]}}}},
       <<"GitDiffToRemoteResponse">> =>
        {struct,
         #{diff => {required,binstr},sha => {required,{ref,<<"GitSha">>}}}},
       <<"DynamicToolCallParams">> =>
        {struct,
         #{arguments => {required,term},
           callId => {required,binstr},
           threadId => {required,binstr},
           turnId => {required,binstr},
           tool => {required,binstr}}},
       <<"SubAgentSource">> =>
        {any_of,
         [{enum,[review,compact]},
          {struct,
           #{thread_spawn =>
              {required,
               {struct,
                #{depth => {required,integer},
                  parent_thread_id => {required,{ref,<<"ThreadId">>}}}}}}},
          {struct,#{other => {required,binstr}}}]},
       <<"JSONRPCError">> =>
        {struct,
         #{error => {required,{ref,<<"JSONRPCErrorError">>}},
           id => {required,{ref,<<"RequestId">>}}}},
       <<"UserInfoResponse">> =>
        {struct,
         #{allegedUserEmail => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ExecOutputStream">> => {enum,[stdout,stderr]},
       <<"AgentMessageContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,['Text']}},text => {required,binstr}}}]},
       <<"SessionConfiguredNotification">> =>
        {struct,
         #{model => {required,binstr},
           rolloutPath => {required,binstr},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           historyEntryCount => {required,integer},
           historyLogId => {required,integer},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
           sessionId => {required,{ref,<<"ThreadId">>}}}},
       <<"UserInput">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[text]}},
             text => {required,binstr},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"TextElement">>}}}}}}},
          {struct,
           #{type => {required,{enum,[image]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[local_image]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[skill]}},
             path => {required,binstr}}},
          {struct,
           #{name => {required,binstr},
             type => {required,{enum,[mention]}},
             path => {required,binstr}}}]},
       <<"RequestUserInputQuestionOption">> =>
        {struct,
         #{label => {required,binstr},description => {required,binstr}}},
       <<"JSONRPCMessage">> =>
        {any_of,
         [{ref,<<"JSONRPCRequest">>},
          {ref,<<"JSONRPCNotification">>},
          {ref,<<"JSONRPCResponse">>},
          {ref,<<"JSONRPCError">>}]},
       <<"GetConversationSummaryResponse">> =>
        {struct,#{summary => {required,{ref,<<"ConversationSummary">>}}}},
       <<"AbsolutePathBuf">> => binstr,
       <<"ReviewDecision">> =>
        {any_of,
         [{enum,[approved]},
          {struct,
           #{approved_execpolicy_amendment =>
              {required,
               {struct,
                #{proposed_execpolicy_amendment =>
                   {required,{list,binstr}}}}}}},
          {enum,[approved_for_session]},
          {enum,[denied]},
          {enum,[abort]}]},
       <<"FunctionCallOutputContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[input_text]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[input_image]}},
             image_url => {required,binstr}}}]},
       <<"PlanType">> =>
        {enum,[free,go,plus,pro,team,business,enterprise,edu,unknown]},
       <<"ResumeConversationParams">> =>
        {struct,
         #{path => {optional,{any_of,[binstr,{exact,null}]}},
           history =>
            {optional,{any_of,[{list,{ref,<<"ResponseItem">>}},{exact,null}]}},
           conversationId =>
            {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}},
           overrides =>
            {optional,
             {any_of,[{ref,<<"NewConversationParams">>},{exact,null}]}}}},
       <<"FuzzyFileSearchResult">> =>
        {struct,
         #{path => {required,binstr},
           root => {required,binstr},
           file_name => {required,binstr},
           indices => {optional,{any_of,[{list,integer},{exact,null}]}},
           score => {required,integer}}},
       <<"ServerRequest">> =>
        {any_of,
         [{struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params =>
              {required,{ref,<<"CommandExecutionRequestApprovalParams">>}},
             method =>
              {required,{enum,['item/commandExecution/requestApproval']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"FileChangeRequestApprovalParams">>}},
             method => {required,{enum,['item/fileChange/requestApproval']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ToolRequestUserInputParams">>}},
             method => {required,{enum,['item/tool/requestUserInput']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"DynamicToolCallParams">>}},
             method => {required,{enum,['item/tool/call']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ChatgptAuthTokensRefreshParams">>}},
             method =>
              {required,{enum,['account/chatgptAuthTokens/refresh']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ApplyPatchApprovalParams">>}},
             method => {required,{enum,[applyPatchApproval]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ExecCommandApprovalParams">>}},
             method => {required,{enum,[execCommandApproval]}}}}]},
       <<"SkillDependencies">> =>
        {struct,#{tools => {required,{list,{ref,<<"SkillToolDependency">>}}}}},
       <<"SkillInterface">> =>
        {struct,
         #{short_description => {optional,{any_of,[binstr,{exact,null}]}},
           brand_color => {optional,{any_of,[binstr,{exact,null}]}},
           default_prompt => {optional,{any_of,[binstr,{exact,null}]}},
           display_name => {optional,{any_of,[binstr,{exact,null}]}},
           icon_large => {optional,{any_of,[binstr,{exact,null}]}},
           icon_small => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"Resource">> =>
        {struct,
         #{name => {required,binstr},
           size => {optional,{any_of,[integer,{exact,null}]}},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           uri => {required,binstr},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ForkConversationResponse">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           rolloutPath => {required,binstr},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}}}},
       <<"ThreadId">> => binstr,
       <<"SandboxSettings">> =>
        {struct,
         #{networkAccess => {optional,{any_of,[boolean,{exact,null}]}},
           excludeSlashTmp => {optional,{any_of,[boolean,{exact,null}]}},
           excludeTmpdirEnvVar => {optional,{any_of,[boolean,{exact,null}]}},
           writableRoots =>
            {optional,{default,{[],{list,{ref,<<"AbsolutePathBuf">>}}}}}}},
       <<"v2">> => term,
       <<"SkillsListEntry">> =>
        {struct,
         #{errors => {required,{list,{ref,<<"SkillErrorInfo">>}}},
           cwd => {required,binstr},
           skills => {required,{list,{ref,<<"SkillMetadata">>}}}}},
       <<"ApplyPatchApprovalResponse">> =>
        {struct,#{decision => {required,{ref,<<"ReviewDecision">>}}}},
       <<"AddConversationSubscriptionResponse">> =>
        {struct,#{subscriptionId => {required,binstr}}},
       <<"RateLimitSnapshot">> =>
        {struct,
         #{primary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}},
           credits =>
            {optional,{any_of,[{ref,<<"CreditsSnapshot">>},{exact,null}]}},
           secondary =>
            {optional,{any_of,[{ref,<<"RateLimitWindow">>},{exact,null}]}},
           plan_type =>
            {optional,{any_of,[{ref,<<"PlanType">>},{exact,null}]}}}},
       <<"ClientRequest">> =>
        {any_of,
         [{struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"InitializeParams">>}},
             method => {required,{enum,[initialize]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadStartParams">>}},
             method => {required,{enum,['thread/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadResumeParams">>}},
             method => {required,{enum,['thread/resume']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadForkParams">>}},
             method => {required,{enum,['thread/fork']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadArchiveParams">>}},
             method => {required,{enum,['thread/archive']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadSetNameParams">>}},
             method => {required,{enum,['thread/name/set']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadUnarchiveParams">>}},
             method => {required,{enum,['thread/unarchive']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadCompactStartParams">>}},
             method => {required,{enum,['thread/compact/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadRollbackParams">>}},
             method => {required,{enum,['thread/rollback']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadListParams">>}},
             method => {required,{enum,['thread/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadLoadedListParams">>}},
             method => {required,{enum,['thread/loaded/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ThreadReadParams">>}},
             method => {required,{enum,['thread/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsListParams">>}},
             method => {required,{enum,['skills/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsRemoteReadParams">>}},
             method => {required,{enum,['skills/remote/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsRemoteWriteParams">>}},
             method => {required,{enum,['skills/remote/write']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/AppsListParams">>}},
             method => {required,{enum,['app/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/SkillsConfigWriteParams">>}},
             method => {required,{enum,['skills/config/write']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/TurnStartParams">>}},
             method => {required,{enum,['turn/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/TurnInterruptParams">>}},
             method => {required,{enum,['turn/interrupt']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ReviewStartParams">>}},
             method => {required,{enum,['review/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ModelListParams">>}},
             method => {required,{enum,['model/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/McpServerOauthLoginParams">>}},
             method => {required,{enum,['mcpServer/oauth/login']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['config/mcpServer/reload']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ListMcpServerStatusParams">>}},
             method => {required,{enum,['mcpServerStatus/list']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/LoginAccountParams">>}},
             method => {required,{enum,['account/login/start']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/CancelLoginAccountParams">>}},
             method => {required,{enum,['account/login/cancel']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['account/logout']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['account/rateLimits/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/FeedbackUploadParams">>}},
             method => {required,{enum,['feedback/upload']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/CommandExecParams">>}},
             method => {required,{enum,['command/exec']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ConfigReadParams">>}},
             method => {required,{enum,['config/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ConfigValueWriteParams">>}},
             method => {required,{enum,['config/value/write']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/ConfigBatchWriteParams">>}},
             method => {required,{enum,['config/batchWrite']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,['configRequirements/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"v2/GetAccountParams">>}},
             method => {required,{enum,['account/read']}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"NewConversationParams">>}},
             method => {required,{enum,[newConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"GetConversationSummaryParams">>}},
             method => {required,{enum,[getConversationSummary]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ListConversationsParams">>}},
             method => {required,{enum,[listConversations]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ResumeConversationParams">>}},
             method => {required,{enum,[resumeConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ForkConversationParams">>}},
             method => {required,{enum,[forkConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ArchiveConversationParams">>}},
             method => {required,{enum,[archiveConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"SendUserMessageParams">>}},
             method => {required,{enum,[sendUserMessage]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"SendUserTurnParams">>}},
             method => {required,{enum,[sendUserTurn]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"InterruptConversationParams">>}},
             method => {required,{enum,[interruptConversation]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"AddConversationListenerParams">>}},
             method => {required,{enum,[addConversationListener]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"RemoveConversationListenerParams">>}},
             method => {required,{enum,[removeConversationListener]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"GitDiffToRemoteParams">>}},
             method => {required,{enum,[gitDiffToRemote]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"LoginApiKeyParams">>}},
             method => {required,{enum,[loginApiKey]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[loginChatGpt]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"CancelLoginChatGptParams">>}},
             method => {required,{enum,[cancelLoginChatGpt]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[logoutChatGpt]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"GetAuthStatusParams">>}},
             method => {required,{enum,[getAuthStatus]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[getUserSavedConfig]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"SetDefaultModelParams">>}},
             method => {required,{enum,[setDefaultModel]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[getUserAgent]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {optional,{exact,null}},
             method => {required,{enum,[userInfo]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"FuzzyFileSearchParams">>}},
             method => {required,{enum,[fuzzyFileSearch]}}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             params => {required,{ref,<<"ExecOneOffCommandParams">>}},
             method => {required,{enum,[execOneOffCommand]}}}}]},
       <<"ReviewTarget">> =>
        {any_of,
         [{struct,#{type => {required,{enum,[uncommittedChanges]}}}},
          {struct,
           #{type => {required,{enum,[baseBranch]}},
             branch => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[commit]}},
             title => {optional,{any_of,[binstr,{exact,null}]}},
             sha => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[custom]}},
             instructions => {required,binstr}}}]},
       <<"GetAuthStatusResponse">> =>
        {struct,
         #{authMethod =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}},
           authToken => {optional,{any_of,[binstr,{exact,null}]}},
           requiresOpenaiAuth => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"ToolRequestUserInputOption">> =>
        {struct,
         #{label => {required,binstr},description => {required,binstr}}},
       <<"ForkConversationParams">> =>
        {struct,
         #{path => {optional,{any_of,[binstr,{exact,null}]}},
           conversationId =>
            {optional,{any_of,[{ref,<<"ThreadId">>},{exact,null}]}},
           overrides =>
            {optional,
             {any_of,[{ref,<<"NewConversationParams">>},{exact,null}]}}}},
       <<"ExecCommandApprovalResponse">> =>
        {struct,#{decision => {required,{ref,<<"ReviewDecision">>}}}},
       <<"FunctionCallOutputBody">> =>
        {any_of,[binstr,{list,{ref,<<"FunctionCallOutputContentItem">>}}]},
       <<"ClientInfo">> =>
        {struct,
         #{name => {required,binstr},
           version => {required,binstr},
           title => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"LoginApiKeyParams">> => {struct,#{apiKey => {required,binstr}}},
       <<"GitDiffToRemoteParams">> => {struct,#{cwd => {required,binstr}}},
       <<"RateLimitWindow">> =>
        {struct,
         #{resets_at => {optional,{any_of,[integer,{exact,null}]}},
           used_percent => {required,number},
           window_minutes => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"McpAuthStatus">> =>
        {enum,[unsupported,not_logged_in,bearer_token,o_auth]},
       <<"SkillMetadata">> =>
        {struct,
         #{enabled => {required,boolean},
           name => {required,binstr},
           scope => {required,{ref,<<"SkillScope">>}},
           path => {required,binstr},
           interface =>
            {optional,{any_of,[{ref,<<"SkillInterface">>},{exact,null}]}},
           description => {required,binstr},
           short_description => {optional,{any_of,[binstr,{exact,null}]}},
           dependencies =>
            {optional,{any_of,[{ref,<<"SkillDependencies">>},{exact,null}]}}}},
       <<"InputItem">> =>
        {any_of,
         [{struct,
           #{data =>
              {required,
               {struct,
                #{text => {required,binstr},
                  text_elements =>
                   {optional,
                    {default,{[],{list,{ref,<<"V1TextElement">>}}}}}}}},
             type => {required,{enum,[text]}}}},
          {struct,
           #{data => {required,{struct,#{image_url => {required,binstr}}}},
             type => {required,{enum,[image]}}}},
          {struct,
           #{data => {required,{struct,#{path => {required,binstr}}}},
             type => {required,{enum,[localImage]}}}}]},
       <<"CallToolResult">> =>
        {struct,
         #{content => {required,{list,term}},
           '_meta' => {optional,term},
           structuredContent => {optional,term},
           isError => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"LocalShellStatus">> => {enum,[completed,in_progress,incomplete]},
       <<"LoginChatGptResponse">> =>
        {struct,#{loginId => {required,binstr},authUrl => {required,binstr}}},
       <<"ConversationSummary">> =>
        {struct,
         #{timestamp => {optional,{any_of,[binstr,{exact,null}]}},
           path => {required,binstr},
           source => {required,{ref,<<"SessionSource">>}},
           cwd => {required,binstr},
           conversationId => {required,{ref,<<"ThreadId">>}},
           modelProvider => {required,binstr},
           cliVersion => {required,binstr},
           gitInfo =>
            {optional,{any_of,[{ref,<<"ConversationGitInfo">>},{exact,null}]}},
           preview => {required,binstr},
           updatedAt => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"DynamicToolCallResponse">> =>
        {struct,
         #{success => {required,boolean},
           contentItems =>
            {required,{list,{ref,<<"DynamicToolCallOutputContentItem">>}}}}},
       <<"SandboxMode">> =>
        {enum,['read-only','workspace-write','danger-full-access']},
       <<"FileChangeRequestApprovalResponse">> =>
        {struct,
         #{decision => {required,{ref,<<"FileChangeApprovalDecision">>}}}},
       <<"NewConversationParams">> =>
        {struct,
         #{profile => {optional,{any_of,[binstr,{exact,null}]}},
           config => {optional,{any_of,[{map,{binstr,term}},{exact,null}]}},
           cwd => {optional,{any_of,[binstr,{exact,null}]}},
           model => {optional,{any_of,[binstr,{exact,null}]}},
           approvalPolicy =>
            {optional,{any_of,[{ref,<<"AskForApproval">>},{exact,null}]}},
           baseInstructions => {optional,{any_of,[binstr,{exact,null}]}},
           compactPrompt => {optional,{any_of,[binstr,{exact,null}]}},
           developerInstructions => {optional,{any_of,[binstr,{exact,null}]}},
           includeApplyPatchTool => {optional,{any_of,[boolean,{exact,null}]}},
           modelProvider => {optional,{any_of,[binstr,{exact,null}]}},
           sandbox =>
            {optional,{any_of,[{ref,<<"SandboxMode">>},{exact,null}]}}}},
       <<"InterruptConversationParams">> =>
        {struct,#{conversationId => {required,{ref,<<"ThreadId">>}}}},
       <<"GhostCommit">> =>
        {struct,
         #{id => {required,binstr},
           parent => {optional,{any_of,[binstr,{exact,null}]}},
           preexisting_untracked_dirs => {required,{list,binstr}},
           preexisting_untracked_files => {required,{list,binstr}}}},
       <<"CommandExecutionRequestApprovalResponse">> =>
        {struct,
         #{decision =>
            {required,{ref,<<"CommandExecutionApprovalDecision">>}}}},
       <<"V1ByteRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"CommandExecutionRequestApprovalParams">> =>
        {struct,
         #{command => {optional,{any_of,[binstr,{exact,null}]}},
           reason => {optional,{any_of,[binstr,{exact,null}]}},
           cwd => {optional,{any_of,[binstr,{exact,null}]}},
           threadId => {required,binstr},
           turnId => {required,binstr},
           commandActions =>
            {optional,
             {any_of,[{list,{ref,<<"v2/CommandAction">>}},{exact,null}]}},
           itemId => {required,binstr},
           proposedExecpolicyAmendment =>
            {optional,{any_of,[{list,binstr},{exact,null}]}}}},
       <<"InitializeResponse">> => {struct,#{userAgent => {required,binstr}}},
       <<"ModeKind">> => {enum,[plan,default]},
       <<"AuthMode">> =>
        {any_of,[{enum,[apikey]},{enum,[chatgpt]},{enum,[chatgptAuthTokens]}]},
       <<"ReasoningItemReasoningSummary">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[summary_text]}},
             text => {required,binstr}}}]},
       <<"SendUserMessageParams">> =>
        {struct,
         #{items => {required,{list,{ref,<<"InputItem">>}}},
           conversationId => {required,{ref,<<"ThreadId">>}}}},
       <<"ToolRequestUserInputQuestion">> =>
        {struct,
         #{id => {required,binstr},
           header => {required,binstr},
           options =>
            {optional,
             {any_of,
              [{list,{ref,<<"ToolRequestUserInputOption">>}},{exact,null}]}},
           question => {required,binstr},
           isOther => {optional,{default,{false,boolean}}},
           isSecret => {optional,{default,{false,boolean}}}}},
       <<"RemoveConversationSubscriptionResponse">> => {map,{binstr,term}},
       <<"GetConversationSummaryParams">> =>
        {any_of,
         [{struct,#{rolloutPath => {required,binstr}}},
          {struct,#{conversationId => {required,{ref,<<"ThreadId">>}}}}]},
       <<"ForcedLoginMethod">> => {enum,[chatgpt,api]},
       <<"SetDefaultModelParams">> =>
        {struct,
         #{model => {optional,{any_of,[binstr,{exact,null}]}},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}}}},
       <<"ReasoningItemContent">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[reasoning_text]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[text]}},text => {required,binstr}}}]},
       <<"LoginChatGptCompleteNotification">> =>
        {struct,
         #{error => {optional,{any_of,[binstr,{exact,null}]}},
           success => {required,boolean},
           loginId => {required,binstr}}},
       <<"Result_of_CallToolResult_or_String">> =>
        {any_of,
         [{struct,#{'Ok' => {required,{ref,<<"CallToolResult">>}}}},
          {struct,#{'Err' => {required,binstr}}}]},
       <<"Tool">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           outputSchema => {optional,term},
           inputSchema => {required,term},
           '_meta' => {optional,term},
           annotations => {optional,term},
           icons => {optional,{any_of,[{list,term},{exact,null}]}}}},
       <<"ResourceTemplate">> =>
        {struct,
         #{name => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           title => {optional,{any_of,[binstr,{exact,null}]}},
           annotations => {optional,term},
           mimeType => {optional,{any_of,[binstr,{exact,null}]}},
           uriTemplate => {required,binstr}}},
       <<"AuthStatusChangeNotification">> =>
        {struct,
         #{authMethod =>
            {optional,{any_of,[{ref,<<"AuthMode">>},{exact,null}]}}}},
       <<"SendUserTurnResponse">> => {map,{binstr,term}},
       <<"GetUserAgentResponse">> =>
        {struct,#{userAgent => {required,binstr}}},
       <<"TurnItem">> =>
        {any_of,
         [{struct,
           #{id => {required,binstr},
             type => {required,{enum,['UserMessage']}},
             content => {required,{list,{ref,<<"UserInput">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['AgentMessage']}},
             content => {required,{list,{ref,<<"AgentMessageContent">>}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['Plan']}},
             text => {required,binstr}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['Reasoning']}},
             summary_text => {required,{list,binstr}},
             raw_content => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['WebSearch']}},
             query => {required,binstr},
             action => {required,{ref,<<"WebSearchAction">>}}}},
          {struct,
           #{id => {required,binstr},
             type => {required,{enum,['ContextCompaction']}}}}]},
       <<"FuzzyFileSearchParams">> =>
        {struct,
         #{query => {required,binstr},
           roots => {required,{list,binstr}},
           cancellationToken => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ResumeConversationResponse">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           rolloutPath => {required,binstr},
           initialMessages =>
            {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}}}},
       <<"PlanItemArg">> =>
        {struct,
         #{status => {required,{ref,<<"StepStatus">>}},
           step => {required,binstr}}},
       <<"HistoryEntry">> =>
        {struct,
         #{text => {required,binstr},
           conversation_id => {required,binstr},
           ts => {required,integer}}},
       <<"ExecCommandSource">> =>
        {enum,
         [agent,user_shell,unified_exec_startup,unified_exec_interaction]},
       <<"Tools">> =>
        {struct,
         #{webSearch => {optional,{any_of,[boolean,{exact,null}]}},
           viewImage => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"ListConversationsResponse">> =>
        {struct,
         #{items => {required,{list,{ref,<<"ConversationSummary">>}}},
           nextCursor => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"FileChangeApprovalDecision">> =>
        {any_of,
         [{enum,[accept]},
          {enum,[acceptForSession]},
          {enum,[decline]},
          {enum,[cancel]}]},
       <<"RequestUserInputQuestion">> =>
        {struct,
         #{id => {required,binstr},
           header => {required,binstr},
           options =>
            {optional,
             {any_of,
              [{list,{ref,<<"RequestUserInputQuestionOption">>}},
               {exact,null}]}},
           question => {required,binstr},
           isOther => {optional,{default,{false,boolean}}},
           isSecret => {optional,{default,{false,boolean}}}}},
       <<"ChatgptAuthTokensRefreshParams">> =>
        {struct,
         #{reason => {required,{ref,<<"ChatgptAuthTokensRefreshReason">>}},
           previousAccountId => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ExecOneOffCommandResponse">> =>
        {struct,
         #{stdout => {required,binstr},
           stderr => {required,binstr},
           exitCode => {required,integer}}},
       <<"TurnAbortReason">> => {enum,[interrupted,replaced,review_ended]},
       <<"GitSha">> => binstr,
       <<"WebSearchAction">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[search]}},
             query => {optional,{any_of,[binstr,{exact,null}]}},
             queries => {optional,{any_of,[{list,binstr},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[open_page]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[find_in_page]}},
             pattern => {optional,{any_of,[binstr,{exact,null}]}},
             url => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{type => {required,{enum,[other]}}}}]},
       <<"ChatgptAuthTokensRefreshReason">> =>
        {any_of,[{enum,[unauthorized]}]},
       <<"CreditsSnapshot">> =>
        {struct,
         #{unlimited => {required,boolean},
           balance => {optional,{any_of,[binstr,{exact,null}]}},
           has_credits => {required,boolean}}},
       <<"StepStatus">> => {enum,[pending,in_progress,completed]},
       <<"ChatgptAuthTokensRefreshResponse">> =>
        {struct,
         #{accessToken => {required,binstr},idToken => {required,binstr}}},
       <<"DynamicToolCallOutputContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[inputText]}},text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[inputImage]}},
             imageUrl => {required,binstr}}}]},
       <<"SkillErrorInfo">> =>
        {struct,#{message => {required,binstr},path => {required,binstr}}},
       <<"TokenUsageInfo">> =>
        {struct,
         #{model_context_window => {optional,{any_of,[integer,{exact,null}]}},
           last_token_usage => {required,{ref,<<"TokenUsage">>}},
           total_token_usage => {required,{ref,<<"TokenUsage">>}}}},
       <<"FileChange">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[add]}},content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[delete]}},content => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[update]}},
             move_path => {optional,{any_of,[binstr,{exact,null}]}},
             unified_diff => {required,binstr}}}]},
       <<"FuzzyFileSearchResponse">> =>
        {struct,
         #{files => {required,{list,{ref,<<"FuzzyFileSearchResult">>}}}}},
       <<"CustomPrompt">> =>
        {struct,
         #{name => {required,binstr},
           path => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           content => {required,binstr},
           argument_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ByteRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"ExecCommandApprovalParams">> =>
        {struct,
         #{command => {required,{list,binstr}},
           reason => {optional,{any_of,[binstr,{exact,null}]}},
           cwd => {required,binstr},
           callId => {required,binstr},
           conversationId => {required,{ref,<<"v2/ThreadId">>}},
           parsedCmd => {required,{list,{ref,<<"ParsedCommand">>}}}}},
       <<"CodexErrorInfo">> =>
        {any_of,
         [{enum,
           [context_window_exceeded,usage_limit_exceeded,
            internal_server_error,unauthorized,bad_request,sandbox_error,
            thread_rollback_failed,other]},
          {struct,
           #{model_cap =>
              {required,
               {struct,
                #{model => {required,binstr},
                  reset_after_seconds =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{http_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_connection_failed =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_stream_disconnected =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}},
          {struct,
           #{response_too_many_failed_attempts =>
              {required,
               {struct,
                #{http_status_code =>
                   {optional,{any_of,[integer,{exact,null}]}}}}}}}]},
       <<"LogoutChatGptResponse">> => {map,{binstr,term}},
       <<"CancelLoginChatGptParams">> =>
        {struct,#{loginId => {required,binstr}}},
       <<"RemoveConversationListenerParams">> =>
        {struct,#{subscriptionId => {required,binstr}}},
       <<"ExecOneOffCommandParams">> =>
        {struct,
         #{command => {required,{list,binstr}},
           cwd => {optional,{any_of,[binstr,{exact,null}]}},
           sandboxPolicy =>
            {optional,{any_of,[{ref,<<"SandboxPolicy">>},{exact,null}]}},
           timeoutMs => {optional,{any_of,[integer,{exact,null}]}}}},
       <<"NetworkAccess">> => {enum,[restricted,enabled]},
       <<"SkillScope">> => {enum,[user,repo,system,admin]},
       <<"InitializeParams">> =>
        {struct,
         #{capabilities =>
            {optional,
             {any_of,[{ref,<<"InitializeCapabilities">>},{exact,null}]}},
           clientInfo => {required,{ref,<<"ClientInfo">>}}}},
       <<"FileChangeRequestApprovalParams">> =>
        {struct,
         #{reason => {optional,{any_of,[binstr,{exact,null}]}},
           grantRoot => {optional,{any_of,[binstr,{exact,null}]}},
           threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr}}},
       <<"ContentItem">> =>
        {any_of,
         [{struct,
           #{type => {required,{enum,[input_text]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[input_image]}},
             image_url => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[output_text]}},
             text => {required,binstr}}}]},
       <<"Verbosity">> => {enum,[low,medium,high]},
       <<"InterruptConversationResponse">> =>
        {struct,#{abortReason => {required,{ref,<<"TurnAbortReason">>}}}},
       <<"RequestId">> => {any_of,[binstr,integer]},
       <<"ToolRequestUserInputResponse">> =>
        {struct,
         #{answers =>
            {required,{map,{binstr,{ref,<<"ToolRequestUserInputAnswer">>}}}}}},
       <<"SkillToolDependency">> =>
        {struct,
         #{command => {optional,{any_of,[binstr,{exact,null}]}},
           type => {required,binstr},
           value => {required,binstr},
           description => {optional,{any_of,[binstr,{exact,null}]}},
           url => {optional,{any_of,[binstr,{exact,null}]}},
           transport => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ArchiveConversationResponse">> => {map,{binstr,term}},
       <<"Profile">> =>
        {struct,
         #{model => {optional,{any_of,[binstr,{exact,null}]}},
           approvalPolicy =>
            {optional,{any_of,[{ref,<<"AskForApproval">>},{exact,null}]}},
           modelProvider => {optional,{any_of,[binstr,{exact,null}]}},
           modelReasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           modelReasoningSummary =>
            {optional,{any_of,[{ref,<<"ReasoningSummary">>},{exact,null}]}},
           modelVerbosity =>
            {optional,{any_of,[{ref,<<"Verbosity">>},{exact,null}]}},
           chatgptBaseUrl => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"SessionSource">> =>
        {any_of,
         [{enum,[cli,vscode,exec,mcp,unknown]},
          {struct,#{subagent => {required,{ref,<<"SubAgentSource">>}}}}]},
       <<"NewConversationResponse">> =>
        {struct,
         #{conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           rolloutPath => {required,binstr},
           reasoningEffort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}}}},
       <<"CommandExecutionApprovalDecision">> =>
        {any_of,
         [{enum,[accept]},
          {enum,[acceptForSession]},
          {struct,
           #{acceptWithExecpolicyAmendment =>
              {required,
               {struct,#{execpolicy_amendment => {required,{list,binstr}}}}}}},
          {enum,[decline]},
          {enum,[cancel]}]},
       <<"EventMsg">> =>
        {any_of,
         [{struct,
           #{message => {required,binstr},
             type => {required,{enum,[error]}},
             codex_error_info =>
              {optional,
               {default,
                {null,
                 {any_of,[{ref,<<"v2/CodexErrorInfo">>},{exact,null}]}}}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[warning]}}}},
          {struct,#{type => {required,{enum,[context_compacted]}}}},
          {struct,
           #{type => {required,{enum,[thread_rolled_back]}},
             num_turns => {required,integer}}},
          {struct,
           #{type => {required,{enum,[task_started]}},
             model_context_window =>
              {optional,{any_of,[integer,{exact,null}]}},
             collaboration_mode_kind =>
              {optional,
               {default,{<<"default">>,{all_of,[{ref,<<"v2/ModeKind">>}]}}}}}},
          {struct,
           #{type => {required,{enum,[task_complete]}},
             last_agent_message => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{info =>
              {optional,{any_of,[{ref,<<"TokenUsageInfo">>},{exact,null}]}},
             type => {required,{enum,[token_count]}},
             rate_limits =>
              {optional,
               {any_of,[{ref,<<"v2/RateLimitSnapshot">>},{exact,null}]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[agent_message]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[user_message]}},
             text_elements =>
              {optional,{default,{[],{list,{ref,<<"v2/TextElement">>}}}}},
             images => {optional,{any_of,[{list,binstr},{exact,null}]}},
             local_images => {optional,{default,{[],{list,binstr}}}}}},
          {struct,
           #{type => {required,{enum,[agent_message_delta]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_delta]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_raw_content]}},
             text => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_raw_content_delta]}},
             delta => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_reasoning_section_break]}},
             item_id => {optional,{default,{<<>>,binstr}}},
             summary_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[session_configured]}},
             cwd => {required,binstr},
             model => {required,binstr},
             reasoning_effort =>
              {optional,
               {any_of,[{ref,<<"v2/ReasoningEffort">>},{exact,null}]}},
             approval_policy =>
              {required,{all_of,[{ref,<<"v2/AskForApproval">>}]}},
             forked_from_id =>
              {optional,{any_of,[{ref,<<"v2/ThreadId">>},{exact,null}]}},
             history_entry_count => {required,integer},
             history_log_id => {required,integer},
             initial_messages =>
              {optional,{any_of,[{list,{ref,<<"EventMsg">>}},{exact,null}]}},
             model_provider_id => {required,binstr},
             rollout_path => {optional,{any_of,[binstr,{exact,null}]}},
             sandbox_policy =>
              {required,{all_of,[{ref,<<"v2/SandboxPolicy">>}]}},
             session_id => {required,{ref,<<"v2/ThreadId">>}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[thread_name_updated]}},
             thread_name => {optional,{any_of,[binstr,{exact,null}]}},
             thread_id => {required,{ref,<<"v2/ThreadId">>}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"McpStartupStatus">>}]}},
             type => {required,{enum,[mcp_startup_update]}},
             server => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[mcp_startup_complete]}},
             cancelled => {required,{list,binstr}},
             failed => {required,{list,{ref,<<"McpStartupFailure">>}}},
             ready => {required,{list,binstr}}}},
          {struct,
           #{type => {required,{enum,[mcp_tool_call_begin]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}}}},
          {struct,
           #{type => {required,{enum,[mcp_tool_call_end]}},
             result =>
              {required,
               {all_of,[{ref,<<"Result_of_CallToolResult_or_String">>}]}},
             call_id => {required,binstr},
             invocation => {required,{ref,<<"McpInvocation">>}},
             duration => {required,{ref,<<"Duration">>}}}},
          {struct,
           #{type => {required,{enum,[web_search_begin]}},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[web_search_end]}},
             query => {required,binstr},
             action => {required,{ref,<<"v2/WebSearchAction">>}},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[exec_command_begin]}},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr}}},
          {struct,
           #{stream => {required,{all_of,[{ref,<<"ExecOutputStream">>}]}},
             type => {required,{enum,[exec_command_output_delta]}},
             chunk => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[terminal_interaction]}},
             stdin => {required,binstr},
             call_id => {required,binstr},
             process_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             type => {required,{enum,[exec_command_end]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             source =>
              {optional,
               {default,
                {<<"agent">>,{all_of,[{ref,<<"ExecCommandSource">>}]}}}},
             cwd => {required,binstr},
             call_id => {required,binstr},
             duration => {required,{all_of,[{ref,<<"Duration">>}]}},
             interaction_input => {optional,{any_of,[binstr,{exact,null}]}},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             process_id => {optional,{any_of,[binstr,{exact,null}]}},
             turn_id => {required,binstr},
             aggregated_output => {optional,{default,{<<>>,binstr}}},
             exit_code => {required,integer},
             formatted_output => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[view_image_tool_call]}},
             path => {required,binstr},
             call_id => {required,binstr}}},
          {struct,
           #{command => {required,{list,binstr}},
             reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[exec_approval_request]}},
             cwd => {required,binstr},
             proposed_execpolicy_amendment =>
              {optional,{any_of,[{list,binstr},{exact,null}]}},
             call_id => {required,binstr},
             parsed_cmd => {required,{list,{ref,<<"ParsedCommand">>}}},
             turn_id => {optional,{default,{<<>>,binstr}}}}},
          {struct,
           #{type => {required,{enum,[request_user_input]}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             questions =>
              {required,{list,{ref,<<"RequestUserInputQuestion">>}}}}},
          {struct,
           #{type => {required,{enum,[dynamic_tool_call_request]}},
             arguments => {required,term},
             callId => {required,binstr},
             turnId => {required,binstr},
             tool => {required,binstr}}},
          {struct,
           #{id => {required,{ref,<<"RequestId">>}},
             message => {required,binstr},
             type => {required,{enum,[elicitation_request]}},
             server_name => {required,binstr}}},
          {struct,
           #{reason => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[apply_patch_approval_request]}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             grant_root => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[deprecation_notice]}},
             summary => {required,binstr},
             details => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[background_event]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[undo_started]}}}},
          {struct,
           #{message => {optional,{any_of,[binstr,{exact,null}]}},
             type => {required,{enum,[undo_completed]}},
             success => {required,boolean}}},
          {struct,
           #{message => {required,binstr},
             type => {required,{enum,[stream_error]}},
             codex_error_info =>
              {optional,
               {default,
                {null,{any_of,[{ref,<<"v2/CodexErrorInfo">>},{exact,null}]}}}},
             additional_details =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}}}},
          {struct,
           #{type => {required,{enum,[patch_apply_begin]}},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             changes => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
             auto_approved => {required,boolean}}},
          {struct,
           #{type => {required,{enum,[patch_apply_end]}},
             stdout => {required,binstr},
             stderr => {required,binstr},
             success => {required,boolean},
             call_id => {required,binstr},
             turn_id => {optional,{default,{<<>>,binstr}}},
             changes =>
              {optional,
               {default,{#{},{map,{binstr,{ref,<<"FileChange">>}}}}}}}},
          {struct,
           #{type => {required,{enum,[turn_diff]}},
             unified_diff => {required,binstr}}},
          {struct,
           #{offset => {required,integer},
             type => {required,{enum,[get_history_entry_response]}},
             entry =>
              {optional,{any_of,[{ref,<<"HistoryEntry">>},{exact,null}]}},
             log_id => {required,integer}}},
          {struct,
           #{type => {required,{enum,[mcp_list_tools_response]}},
             tools => {required,{map,{binstr,{ref,<<"v2/Tool">>}}}},
             resources =>
              {required,{map,{binstr,{list,{ref,<<"v2/Resource">>}}}}},
             auth_statuses =>
              {required,{map,{binstr,{ref,<<"v2/McpAuthStatus">>}}}},
             resource_templates =>
              {required,
               {map,{binstr,{list,{ref,<<"v2/ResourceTemplate">>}}}}}}},
          {struct,
           #{type => {required,{enum,[list_custom_prompts_response]}},
             custom_prompts => {required,{list,{ref,<<"CustomPrompt">>}}}}},
          {struct,
           #{type => {required,{enum,[list_skills_response]}},
             skills => {required,{list,{ref,<<"v2/SkillsListEntry">>}}}}},
          {struct,
           #{type => {required,{enum,[list_remote_skills_response]}},
             skills => {required,{list,{ref,<<"v2/RemoteSkillSummary">>}}}}},
          {struct,
           #{id => {required,binstr},
             name => {required,binstr},
             type => {required,{enum,[remote_skill_downloaded]}},
             path => {required,binstr}}},
          {struct,#{type => {required,{enum,[skills_update_available]}}}},
          {struct,
           #{type => {required,{enum,[plan_update]}},
             plan => {required,{list,{ref,<<"PlanItemArg">>}}},
             explanation =>
              {optional,{default,{null,{any_of,[binstr,{exact,null}]}}}}}},
          {struct,
           #{reason => {required,{ref,<<"TurnAbortReason">>}},
             type => {required,{enum,[turn_aborted]}}}},
          {struct,#{type => {required,{enum,[shutdown_complete]}}}},
          {struct,
           #{type => {required,{enum,[entered_review_mode]}},
             target => {required,{ref,<<"v2/ReviewTarget">>}},
             user_facing_hint => {optional,{any_of,[binstr,{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[exited_review_mode]}},
             review_output =>
              {optional,
               {any_of,[{ref,<<"ReviewOutputEvent">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[raw_response_item]}},
             item => {required,{ref,<<"v2/ResponseItem">>}}}},
          {struct,
           #{type => {required,{enum,[item_started]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"v2/ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[item_completed]}},
             item => {required,{ref,<<"TurnItem">>}},
             thread_id => {required,{ref,<<"v2/ThreadId">>}},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[agent_message_content_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[plan_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[reasoning_content_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             summary_index => {optional,{default,{0,integer}}},
             thread_id => {required,binstr},
             turn_id => {required,binstr}}},
          {struct,
           #{type => {required,{enum,[reasoning_raw_content_delta]}},
             delta => {required,binstr},
             item_id => {required,binstr},
             thread_id => {required,binstr},
             turn_id => {required,binstr},
             content_index => {optional,{default,{0,integer}}}}},
          {struct,
           #{type => {required,{enum,[collab_agent_spawn_begin]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[collab_agent_spawn_end]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             new_thread_id =>
              {optional,{any_of,[{ref,<<"v2/ThreadId">>},{exact,null}]}}}},
          {struct,
           #{type => {required,{enum,[collab_agent_interaction_begin]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[collab_agent_interaction_end]}},
             prompt => {required,binstr},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{type => {required,{enum,[collab_waiting_begin]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_ids =>
              {required,{list,{ref,<<"v2/ThreadId">>}}}}},
          {struct,
           #{type => {required,{enum,[collab_waiting_end]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             statuses => {required,{map,{binstr,{ref,<<"AgentStatus">>}}}}}},
          {struct,
           #{type => {required,{enum,[collab_close_begin]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}},
          {struct,
           #{status => {required,{all_of,[{ref,<<"AgentStatus">>}]}},
             type => {required,{enum,[collab_close_end]}},
             call_id => {required,binstr},
             sender_thread_id => {required,{all_of,[{ref,<<"v2/ThreadId">>}]}},
             receiver_thread_id =>
              {required,{all_of,[{ref,<<"v2/ThreadId">>}]}}}}]},
       <<"GetAuthStatusParams">> =>
        {struct,
         #{refreshToken => {optional,{any_of,[boolean,{exact,null}]}},
           includeToken => {optional,{any_of,[boolean,{exact,null}]}}}},
       <<"AgentStatus">> =>
        {any_of,
         [{enum,[pending_init]},
          {enum,[running]},
          {struct,#{completed => {required,{any_of,[binstr,{exact,null}]}}}},
          {struct,#{errored => {required,binstr}}},
          {enum,[shutdown]},
          {enum,[not_found]}]},
       <<"JSONRPCErrorError">> =>
        {struct,
         #{code => {required,integer},
           data => {optional,term},
           message => {required,binstr}}},
       <<"ToolRequestUserInputAnswer">> =>
        {struct,#{answers => {required,{list,binstr}}}},
       <<"ReviewCodeLocation">> =>
        {struct,
         #{absolute_file_path => {required,binstr},
           line_range => {required,{ref,<<"ReviewLineRange">>}}}},
       <<"SetDefaultModelResponse">> => {map,{binstr,term}},
       <<"JSONRPCRequest">> =>
        {struct,
         #{id => {required,{ref,<<"RequestId">>}},
           params => {optional,term},
           method => {required,binstr}}},
       <<"TokenUsage">> =>
        {struct,
         #{cached_input_tokens => {required,integer},
           input_tokens => {required,integer},
           output_tokens => {required,integer},
           reasoning_output_tokens => {required,integer},
           total_tokens => {required,integer}}},
       <<"InitializeCapabilities">> =>
        {struct,#{experimentalApi => {optional,{default,{false,boolean}}}}},
       <<"McpStartupFailure">> =>
        {struct,#{error => {required,binstr},server => {required,binstr}}},
       <<"ReasoningSummary">> =>
        {any_of,[{enum,[auto,concise,detailed]},{enum,[none]}]},
       <<"ReviewOutputEvent">> =>
        {struct,
         #{findings => {required,{list,{ref,<<"ReviewFinding">>}}},
           overall_confidence_score => {required,number},
           overall_correctness => {required,binstr},
           overall_explanation => {required,binstr}}},
       <<"V1TextElement">> =>
        {struct,
         #{byteRange => {required,{all_of,[{ref,<<"V1ByteRange">>}]}},
           placeholder => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"ReviewLineRange">> =>
        {struct,#{start => {required,integer},'end' => {required,integer}}},
       <<"ToolRequestUserInputParams">> =>
        {struct,
         #{threadId => {required,binstr},
           turnId => {required,binstr},
           itemId => {required,binstr},
           questions =>
            {required,{list,{ref,<<"ToolRequestUserInputQuestion">>}}}}},
       <<"ReviewFinding">> =>
        {struct,
         #{priority => {required,integer},
           title => {required,binstr},
           body => {required,binstr},
           code_location => {required,{ref,<<"ReviewCodeLocation">>}},
           confidence_score => {required,number}}},
       <<"CancelLoginChatGptResponse">> => {map,{binstr,term}},
       <<"SendUserTurnParams">> =>
        {struct,
         #{items => {required,{list,{ref,<<"InputItem">>}}},
           cwd => {required,binstr},
           conversationId => {required,{ref,<<"ThreadId">>}},
           model => {required,binstr},
           summary => {required,{ref,<<"ReasoningSummary">>}},
           sandboxPolicy => {required,{ref,<<"SandboxPolicy">>}},
           approvalPolicy => {required,{ref,<<"AskForApproval">>}},
           effort =>
            {optional,{any_of,[{ref,<<"ReasoningEffort">>},{exact,null}]}},
           outputSchema => {optional,term}}},
       <<"ApplyPatchApprovalParams">> =>
        {struct,
         #{reason => {optional,{any_of,[binstr,{exact,null}]}},
           callId => {required,binstr},
           conversationId => {required,{ref,<<"v2/ThreadId">>}},
           fileChanges => {required,{map,{binstr,{ref,<<"FileChange">>}}}},
           grantRoot => {optional,{any_of,[binstr,{exact,null}]}}}},
       <<"LoginApiKeyResponse">> => {map,{binstr,term}},
       <<"LocalShellAction">> =>
        {any_of,
         [{struct,
           #{command => {required,{list,binstr}},
             env => {optional,{any_of,[{map,{binstr,term}},{exact,null}]}},
             type => {required,{enum,[exec]}},
             user => {optional,{any_of,[binstr,{exact,null}]}},
             timeout_ms => {optional,{any_of,[integer,{exact,null}]}},
             working_directory =>
              {optional,{any_of,[binstr,{exact,null}]}}}}]}},
     {map,{binstr,term}}}}}.
